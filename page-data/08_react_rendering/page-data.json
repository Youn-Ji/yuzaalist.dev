{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/08_react_rendering/",
    "result": {"data":{"cur":{"id":"d765c841-fb26-5f4c-97cd-fd49a6fd4506","html":"<h2 id=\"왜-그러는거야\" style=\"position:relative;\"><a href=\"#%EC%99%9C-%EA%B7%B8%EB%9F%AC%EB%8A%94%EA%B1%B0%EC%95%BC\" aria-label=\"왜 그러는거야 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>왜 그러는거야?</h2>\n<p>직장에서 친해진 개발자 분들과 이런 저런 이야기를 나누는 디스코드 방이 있습니다. 항상 요상한 문제를 내서 시험에 들게 하는 분이 계신데 오늘은 이런 문제를 가지고 오셨습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n Promise\n <span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n <span class=\"token function\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">s</span><span class=\"token operator\">=></span>s<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>싸늘하다.. 비수가 날아와</p>\n<p>App이라는 ‘함수’가 실행되면서 0이 가장 먼저 찍힐 것이고, layout이 페인트 되기 전에 useLayoutEffect가 실행되니까 4가 찍힐거라 생각했습니다. 그 다음에 useEffect가 돌면서 1이 찍힐 것 같습니다.\nPromise then의 콜백은 브라우저 이벤트 루프의 마이크로 태스크 큐로, setTimeout의 콜백은 태스크 큐로 들어갑니다.\n마이크로 태스크 큐의 우선순위가 태스크 큐보다 높기 때문에 2, 3의 순서로 찍힐 것이라 예상했습니다.</p>\n<p>결론은 0 4 1 2 3.</p>\n<p>앗 근데 useLayoutEffect안에 있는 setState를 까먹었습니다. setState까지 고려해야할까요? 설마 그런 문제가 어딨냐며 말도 안된다면서 위의 답을 보냈습니다.\n하지만 setState까지 고려해야하는 문제가 맞았습니다..</p>\n<p>콘솔에 찍히는 로그는 0 4 1 0 1 2 2 3 3 였습니다. (여기 <a href=\"https://stackblitz.com/edit/stackblitz-starters-v3pkby?description=React%20%20%20TypeScript%20starter%20project&#x26;file=src%2FApp.tsx,src%2Findex.tsx&#x26;title=React%20Starter\">StackBlitz</a>에서 확인 가능합니다)</p>\n<h2 id=\"리액트-비동기-vs-자바스크립트-비동기\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8-%EB%B9%84%EB%8F%99%EA%B8%B0-vs-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%B9%84%EB%8F%99%EA%B8%B0\" aria-label=\"리액트 비동기 vs 자바스크립트 비동기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리액트 비동기 vs 자바스크립트 비동기</h2>\n<p>평소 리액트에서 이야기하는 setState의 비동기 동작과 자바스크립트의 비동기 동작을 크게 구분하지 않고 쓰고 있었습니다.\nsetState가 비동기로 동작한다고 말하는 이유는 여러번 호출됐을 때, 내부의 스케줄러를 통해 한번에 state를 업데이트하는 방식 때문입니다.</p>\n<p>이 <a href=\"https://github.com/facebook/react/blob/main/packages/scheduler/src/forks/Scheduler.js\">스케줄러</a>는 브라우저 엔진에서 제공되는 것이 아닌 자바스크립트로 작성된 코드이며, 리액트 고유의 렌더링 프로세스입니다.</p>\n<p>그럼 스케줄러 내부에서는 브라우저 이벤트 루프를 타는 비동기 로직을 사용하지 않는 것일까요?</p>\n<p>아래는 리액트 스케줄러 코드의 일부분을 발췌한 것입니다. 사용할 수 있는 웹 API를 체크해서 스케줄러가 실행되는 환경을 나눕니다. DOM and Worker environments에서 MessageChannel을 사용해 메시지를 주고받습니다. 이는 Web Worker 기반으로 완전히 다른 스레드를 사용합니다.\n이런저런 스택이나 큐가 쌓여있는 기존 스레드가 아닌 새로운 스레드를 타는 것이니 훨씬 속도가 빠를 것 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Capture local references to native APIs, in case a polyfill overrides them.</span>\n<span class=\"token keyword\">const</span> localSetTimeout <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> setTimeout <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">?</span> setTimeout <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> localClearTimeout <span class=\"token operator\">=</span>\n  <span class=\"token keyword\">typeof</span> clearTimeout <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">?</span> clearTimeout <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> localSetImmediate <span class=\"token operator\">=</span>\n  <span class=\"token keyword\">typeof</span> setImmediate <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span> <span class=\"token operator\">?</span> setImmediate <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// IE and Node.js + jsdom</span>\n\n<span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">let</span> schedulePerformWorkUntilDeadline<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> localSetImmediate <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Node.js and old IE.</span>\n  <span class=\"token comment\">// There's a few reasons for why we prefer setImmediate.</span>\n  <span class=\"token comment\">//</span>\n  <span class=\"token comment\">// Unlike MessageChannel, it doesn't prevent a Node.js process from exiting.</span>\n  <span class=\"token comment\">// (Even though this is a DOM fork of the Scheduler, you could get here</span>\n  <span class=\"token comment\">// with a mix of Node.js 15+, which has a MessageChannel, and jsdom.)</span>\n  <span class=\"token comment\">// https://github.com/facebook/react/issues/20756</span>\n  <span class=\"token comment\">//</span>\n  <span class=\"token comment\">// But also, it runs earlier which is the semantic we want.</span>\n  <span class=\"token comment\">// If other browsers ever implement it, it's better to use it.</span>\n  <span class=\"token comment\">// Although both of these would be inferior to native scheduling.</span>\n  <span class=\"token function-variable function\">schedulePerformWorkUntilDeadline</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">localSetImmediate</span><span class=\"token punctuation\">(</span>performWorkUntilDeadline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> MessageChannel <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// DOM and Worker environments.</span>\n  <span class=\"token comment\">// We prefer MessageChannel because of the 4ms setTimeout clamping.</span>\n  <span class=\"token keyword\">const</span> channel <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MessageChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> port <span class=\"token operator\">=</span> channel<span class=\"token punctuation\">.</span>port2<span class=\"token punctuation\">;</span>\n  channel<span class=\"token punctuation\">.</span>port1<span class=\"token punctuation\">.</span>onmessage <span class=\"token operator\">=</span> performWorkUntilDeadline<span class=\"token punctuation\">;</span>\n  <span class=\"token function-variable function\">schedulePerformWorkUntilDeadline</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    port<span class=\"token punctuation\">.</span><span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// We should only fallback here in non-browser environments.</span>\n  <span class=\"token function-variable function\">schedulePerformWorkUntilDeadline</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// $FlowFixMe[not-a-function] nullable value</span>\n    <span class=\"token function\">localSetTimeout</span><span class=\"token punctuation\">(</span>performWorkUntilDeadline<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>출처 https://github.com/facebook/react/blob/main/packages/scheduler/src/forks/Scheduler.js#L586-L617</span></div>\n<br/>\n<p>리액트가 브라우저에서 렌더링되면 Web Worker에서 주고받는 메시지 기반으로 스케줄링 될테니 기존 스레드의 이벤트 루프보다 훨씬 빠른 연산이 가능할 것으로 보입니다.</p>\n<p>이를 통해 리액트에서 이야기하는 비동기가 브라우저 레벨의 비동기가 아닌 것은 확실히 알 수 있었습니다.</p>\n<p>그래서 로그도 <code class=\"language-text\">0 4 1 0 1</code> / <code class=\"language-text\">2 2 3 3</code> 이렇게 리액트 코드의 로그, 콜백 코드의 로그 2개의 파트로 나뉘어지는 것이 아닐까요.</p>\n<p>리액트 내에서 복잡하게 돌아가는 렌더링 작업들은 결국 자바스크립트 레벨로 봤을 때 하나의 동기 로직이고, Promise, setTimeout과 같은 찐(?) 비동기 로직만이 브라우저 엔진의 이벤트 루프를 탈 수 있다는 것을 다시 한번 되새길 수 있는 날이었습니다.</p>\n<p>그럼 이만.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%99%9C-%EA%B7%B8%EB%9F%AC%EB%8A%94%EA%B1%B0%EC%95%BC\">왜 그러는거야?</a></li>\n<li><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8-%EB%B9%84%EB%8F%99%EA%B8%B0-vs-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%B9%84%EB%8F%99%EA%B8%B0\">리액트 비동기 vs 자바스크립트 비동기</a></li>\n</ul>\n</div>","excerpt":"왜 그러는거야? 직장에서 친해진 개발자 분들과 이런 저런 이야기를 나누는 디스코드 방이 있습니다. 항상 요상한 문제를 내서 시험에 들게 하는 분이 계신데 오늘은 이런 문제를 가지고 오셨습니다. 싸늘하다.. 비수가 날아와 App이라는 ‘함수’가 실행되면서 0이 가장 먼저 찍힐 것이고, layout이 페인트 되기 전에 useLayoutEffect가 실행되니까 4가 찍힐거라 생각했습니다. 그 다음에 useEffect가 돌면서 1이 찍힐 것 같습니다.\nPromise then의 콜백은 브라우저 이벤트 루프의 마이크로 태스크 큐로, setTimeout의 콜백은 태스크 큐로 들어갑니다.\n마이크로 태스크 큐의 우선순위가 태스크 큐보다 높기 때문에 2, 3의 순서로 찍힐 것이라 예상했습니다. 결론은 0 4 1 2 3. 앗 근데 useLayoutEffect안에 있는 setState를 까먹었습니다. setState까지 고려해야할까요? 설마 그런 문제가 어딨냐며 말도 안된다면서 위의 답을 보냈습니다.\n…","frontmatter":{"date":"October 11, 2023","title":"리액트 콘솔 대잔치","categories":"challenge","author":"유자","emoji":"🎢"},"fields":{"slug":"/08_react_rendering/"}},"next":{"id":"73ba89f2-cc5e-500b-a90a-0aed6cfeee03","html":"<h1 id=\"나의-작고-소중한-사이드-프로젝트\" style=\"position:relative;\"><a href=\"#%EB%82%98%EC%9D%98-%EC%9E%91%EA%B3%A0-%EC%86%8C%EC%A4%91%ED%95%9C-%EC%82%AC%EC%9D%B4%EB%93%9C-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8\" aria-label=\"나의 작고 소중한 사이드 프로젝트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>나의 작고 소중한 사이드 프로젝트</h1>\n<p>회사 출근했을 당시 점심을 배달로 시켜먹곤 했습니다. 여러명이 같이 주문을 하기 위해 배달의 민족 가게 링크를 슬랙으로 공유했습니다. 회사이다 보니 다들 PC로 먼저 확인했고 짧은 탄식과 함께 핸드폰을 주섬주섬 꺼내 앱으로 타고 타고 들어가 메뉴를 확인했습니다. (지금은 ‘함께 주문하기’ 기능이 나와서 탄식은 잘 안들리는 것 같습니다.)\n어느 날 동료 앱 개발자 분이 배민 웹을 만들고 싶은데 도와줄 사람을 찾고 있었습니다. 재빨리 손을 들었습니다.\n이후 빠르게 만들어 동료분들과 소소하게 사용했습니다. 괜히 배민께 피해갈라 앱으로 가는 딥링크도 연결해놨습니다.\n당시 사내 라이브러리인 디자인 시스템을 사용했는데, 퇴사 이후 배포하려고 보니, 토큰이 만료돼서 배포가 불가했습니다. 그렇게 해당 라이브러리를 걷어내지 않으면 배포할 수 없는 상황이 생겼고, 영원히 제 기억 속에서 잊혀…</p>\n<p>져 가지 않고 다시 살려내보았습니다. 아래 내용은 그 삽질을 담은 내용입니다.</p>\n<p>이 프로젝트는 Remix를 사용했고 배포는 Cloudflare Pages를 사용했습니다. Remix CLI로 프로젝트를 세팅할 때, CloudFlare Pages 옵션이 있어서 선택했는데, Next.js에게 Vercel이 있다면 Remix에겐  Cloudflare인듯 합니다.</p>\n<h2 id=\"스타일링-라이브러리를-무엇으로-바꿔볼까\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%83%80%EC%9D%BC%EB%A7%81-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC-%EB%AC%B4%EC%97%87%EC%9C%BC%EB%A1%9C-%EB%B0%94%EA%BF%94%EB%B3%BC%EA%B9%8C\" aria-label=\"스타일링 라이브러리를 무엇으로 바꿔볼까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스타일링 라이브러리를 무엇으로 바꿔볼까</h2>\n<p>위에서 언급했듯이, 옛 직장의 사내 라이브러리를 들어내야 했습니다. (이것을 통해 의존성의 중요성을 다시 한번 깨달았습니다.)\n일단 배포를 정상적으로 동작시키는 것이 우선이었고, 그를 위한 작업이라 시간을 많이 들이고 싶진 않았습니다. Radix와 같은 headless UI 라이브러리를 사용하고 그 위에 제가 원하는대로 스타일링을 덮을까 했지만 디자인하는데 시간이 오히려 걸릴 것 같았습니다. 배보다 배꼽이 큰 느낌.\n그러던 중 shadcn/ui 라는 라이브러리를 알게 됐습니다. Radix 와 Tailwind의 조합인데, 저는 Tailwind에 큰 거부감도 없고 오히려 쓰기 편했기 때문에 바로 적용하기로 결정할 수 있었습니다.\n그리고 Tailwind를 사용해 디자인 시스템 라이브러리를 어떻게 구현할 수 있는지 궁금했습니다.\n아 그리고 전 회사의 디자인 시스템도 Radix UI 기반이었기 때문에 이해하기 쉬울 것이라고 판단했습니다.</p>\n<p>아주 신기했던 것은 shadcn 이라는 배포된 npm 라이브러리가 있는게 아니었습니다. 유저 입장에서 설치해야하는 디펜던시는 radix와 tailwind 뿐이었습니다.\n필요한 컴포넌트를 사용하고 싶을 때 shadcn 공홈에 있는 cli를 사용하면 radix 패키지가 설치되고 그에 맞는 컴포넌트 코드가 추가됩니다. 물론 shadcn 사용 전에 어느 곳으로 코드가 추가될지 config 파일을 작성해주어야 합니다. 라이브러리 코드가 궁금하면 굳이 타고 들어가지 않아도 되고 마치 제 코드처럼 수정할 수 있어 공부하기 아주 좋았습니다.</p>\n<h3 id=\"remix-옛-버전에-tailwind를-어떻게-설치할-것인가\" style=\"position:relative;\"><a href=\"#remix-%EC%98%9B-%EB%B2%84%EC%A0%84%EC%97%90-tailwind%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%84%A4%EC%B9%98%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80\" aria-label=\"remix 옛 버전에 tailwind를 어떻게 설치할 것인가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Remix 옛 버전에 Tailwind를 어떻게 설치할 것인가</h3>\n<p>작업 당시 가장 최근에 나온 Remix는 v1.19이고 v2.0로 올릴 준비가 만만인 상태였습니다. 제 플젝은 v1.1을 사용하고 있었습니다. 일단 v1.1에서 공식문서대로 테일윈드 설치를 해보려고 했으나, 실패했습니다. 문서를 잘 살펴보니 현재 나와있는 테일윈드 설치법은 Remix 프로젝트를 새로 만드는 것 뿐이고, 기존 프로젝트에 붙이는 방법은 없었습니다.</p>\n<p>그간 변화도 있었습니다. <code class=\"language-text\">remix</code> 패키지는 더이상 사용하지 않고, <code class=\"language-text\">remix-run/react</code> 여기서 기존 api를 import해서 쓴다던가, 기존 package.json에 있는 postinstall을 실행하려고 하니 거기에 있는 cloundflare page setup 명령어가 deprecated 되어 있었습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABmUlEQVQoz02R2XKbQBBF9SnxQ2w5FgI0MCvrwFgCbCzJSypV+f/fOImQy+WHrtu3H0717V4NUuOKkjC/cPz4zfHPX6r9QGULXDeg6kAqLTvlELpAunopsXhHZkpioYiF5CEWrNokRwqDLB8p+2ecn9D1QBVelt62I0X3hGkGdHVY9DqfFm/9RF4E7qKcHz83rMZMoTOL7SbC9IprB5rHmTC9UT/O+OFMeH6nPZxo9ke68UwVrvN+elv6/umd+23Oze2GlU4TtnFCalqMn9F+RvoX8mogzksy1yHLQH7RokdVe3LXL15YT6pqEhNYb+UVqLYZu4cEYTpUd0K7PbY4oMsRUx5w1YgynkQ1CBdIM0ckHNHOEgm76DYrWEcZN7cRq91mh00V1raEOlBVgb7d48OMrUZMMSBNSyxrUtsTC/MJ+wb+Dry7j1nfJ0jrKdsB3Q64/hnrR2TZf0W+xLXNQDe9L1E336DXDfMrMHpISIQla2Z0+ED5M7o7Iy++e0X7E7Iel7vJco9pRsTnCdLP2umWX7Hi5v+X/wHirQ9DtQ1UtAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"error log\"\n        title=\"error log\"\n        src=\"/static/b523ca0bfbbdb6394e6b430a1792a5a3/37523/07_1_remix-error.png\"\n        srcset=\"/static/b523ca0bfbbdb6394e6b430a1792a5a3/e9ff0/07_1_remix-error.png 180w,\n/static/b523ca0bfbbdb6394e6b430a1792a5a3/f21e7/07_1_remix-error.png 360w,\n/static/b523ca0bfbbdb6394e6b430a1792a5a3/37523/07_1_remix-error.png 720w,\n/static/b523ca0bfbbdb6394e6b430a1792a5a3/302a4/07_1_remix-error.png 1080w,\n/static/b523ca0bfbbdb6394e6b430a1792a5a3/d7e70/07_1_remix-error.png 1286w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>작업 중 만난 에러 로그</span></div>\n<br/>\n<p>v1.1.1에 테일윈드를 적용해놓은 <a href=\"https://codesandbox.io/s/2x8pg?file=/.gitignore\">코드펜</a>을 찾긴 했는데, 테일윈드 css를 빌드하고 output 디렉토리까지 지정해줘야 하는것으로 보였습니다. 근데 이 코드는 개발 서버용이기 때문에 production 배포까지 고려한 tailwind 설정이 필요했습니다. 여기서 버전을 최신으로 올리는 것이 낫겠다고 판단했습니다. 지금 한계에 부딪혀서 굴복한다고 다른 한계를 만나지 않는 것은 아니기 때문에. 조만간 v2도 나온다고 하니 미리 써보기도 할 겸 겸사겸사 진행했습니다.</p>\n<p>그래서 최근 CloudFlare Page로 배포되는 Remix 프로젝트는 어떻게 구성되는지 create remix로 만들어 확인해봤습니다. 변경된 부분(package.json 먼저, 그 다음에 진입점 파일들)을 비교해가며 일일이 수정해준 후에 인스톨하니 잘 구동되었습니다. 이후 Tailwind 설치도 공식문서대로 따라하니 잘 적용되었습니다. (개운)</p>\n<p>버전을 올리며 인상 깊었던 것은, Remix에서 v2로의 스무스한 랜딩을 위해 future flag라는 기능을 제공한다는 것이었습니다. v2의 breaking changes를 remix.config 파일에서 on/off 해서 v1 에서도 쓸 수 있게 했습니다. 개발자 사용 편의를 많이 봐주고 있다는 것을 느낄 수 있었습니다.</p>\n<p>결국 Remix 버전 업데이트로 Tailwind를 잘 적용할 수 있었고 스타일링 라이브러리도 교체할 수 있었습니다.\n문제는 이 다음이었습니다.</p>\n<h2 id=\"cloudflare-pages-배포-웨않대\" style=\"position:relative;\"><a href=\"#cloudflare-pages-%EB%B0%B0%ED%8F%AC-%EC%9B%A8%EC%95%8A%EB%8C%80\" aria-label=\"cloudflare pages 배포 웨않대 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CloudFlare Pages 배포 웨않대</h2>\n<p>배포할 때 remix build 단계에서 에러가 발생했습니다. 에러 로그를 보니 <a href=\"https://github.com/remix-run/remix/issues/2400\">이런 이슈</a>였고 Node 버전이 낮아서라는걸 알게되었습니다.\nCloudFlare Pages 대시보드에서 노드 버전을 어떻게 명시해줄 수 있나 찾아보니 환경 변수로 넣어주면 되는 것이었습니다. (<a href=\"https://community.cloudflare.com/t/pages-node-js-version/295548\">참고글</a>) 바로 적용해주고 다시 배포를 돌려보니 배포는 성공했습니다.\n그러나 페이지 접근 시에 아래와 같은 화면이 보였습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA60lEQVQoz3VSa4+EIAz0//9HP53IoocP3ovoXNoLmzuXbTK2gTIzVLrrurDvO5xzjG3bYK0FBe2d58m5hdpTa4qOPkII9H2PYRi4prwsC7z3MMYwqK6iJJhz/kx4HAc3EKgOITDB3c09Wq6ZsBJU9VKOt8MkRE5jDPDO4SylKcKEWmtIKTGOI2e9rLDuV6Q6jTHyKNQ0Y3xM0HpFShGlFBYjvBzSTyEipRTmeYaQE+S0siPao1E8U+Ie8fjGl9SQSsNag5TS64ZE3qE9neas/izgU3T3A6RY51mfE625WBBSYTcVxmfk8v/5/AAC23CDeE+KygAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1101 error\"\n        title=\"1101 error\"\n        src=\"/static/5b511db9fc31f89895c5032a93275dab/37523/07_2_1101-error.png\"\n        srcset=\"/static/5b511db9fc31f89895c5032a93275dab/e9ff0/07_2_1101-error.png 180w,\n/static/5b511db9fc31f89895c5032a93275dab/f21e7/07_2_1101-error.png 360w,\n/static/5b511db9fc31f89895c5032a93275dab/37523/07_2_1101-error.png 720w,\n/static/5b511db9fc31f89895c5032a93275dab/302a4/07_2_1101-error.png 1080w,\n/static/5b511db9fc31f89895c5032a93275dab/07a9c/07_2_1101-error.png 1440w,\n/static/5b511db9fc31f89895c5032a93275dab/71dc1/07_2_1101-error.png 2346w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>1101 에러</span></div>\n<br/>\n<p>‘cloudflare pages 1101 error’와 같은 키워드로 구글링을 해봐도 마땅한 글이 없어 헤매던 중, log를 확인해보라는 이야기가 있었습니다. 머리를 탁치며 노선을 바꿨습니다.\n처음엔 네트워크 탭을 살펴봤습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABmElEQVQoz4VS7Y6kIBD0/d9vc87m3B2/UJTGUcFRBGpDe7PZX3udVAwgRXVXZeu6ImGeZxzHgRgjvPcIIXwjhoBBjuhHQt0KfJY1Q/Q9BkUQUkGNI0bSyLTWUEqBiBjP5xP7vsM5x98EHwLqpkdV1iDSkEMiV6i7AY3omEgqDaUfyBLBuiwwxuA8T6RKe9tmmTRVjMDfgfCnlyhIY1hWfuixGBazrgbGWli7IXs8ZjRtCyklpmnittNPbTdAjhrWWm67kQQhOkjSmO0Gu+04nONHj8Ph9J6RrXaHnh6wxrCy07lrpsuK53OH95fq6rOHaAQ0Ed7f35Hfbuj6Hq0QKMuKBaWRZUCEP09WlnCeAc5fxiTywwUmpKFD23VQRLjdcuR5jqIoWES65/6pzV6uvhBChA/xh8uRCTsh0bYCy7KgrgSqqv5OxtX2wfcz/LcuwqoZcS8rVvj29oE8v4FI8dxTUlK727ZdCn/D5XLEwjPeYcyKovhAeSf0veJ1SsgrJb8q/En4qhSX5LYQEvc7YZkNpklz++nsC07jASpKIWYTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"network tab\"\n        title=\"network tab\"\n        src=\"/static/6aac91b28abe59d0d4320c3ec134c08a/37523/07_3_network-tab.png\"\n        srcset=\"/static/6aac91b28abe59d0d4320c3ec134c08a/e9ff0/07_3_network-tab.png 180w,\n/static/6aac91b28abe59d0d4320c3ec134c08a/f21e7/07_3_network-tab.png 360w,\n/static/6aac91b28abe59d0d4320c3ec134c08a/37523/07_3_network-tab.png 720w,\n/static/6aac91b28abe59d0d4320c3ec134c08a/302a4/07_3_network-tab.png 1080w,\n/static/6aac91b28abe59d0d4320c3ec134c08a/07a9c/07_3_network-tab.png 1440w,\n/static/6aac91b28abe59d0d4320c3ec134c08a/863d7/07_3_network-tab.png 3520w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>1101 에러의 네트워크 탭</span></div>\n<br/>\n<p>딱히 도움 되는 것은 없었습니다. 새롭게 보이는 키워드로 구글링을 해보았으나 비슷한 내용만 나왔습니다.\n그러던 중 CloudFlare Pages 대시보드를 살펴보면서 Functions Metrics 라는 로깅 시스템을 발견했고, 여기서 error를 count하고 있으니 관련 로그를 확인할 수 있는 방법도 있지 않을까 생각했습니다. 서버를 서빙하는 것도 이곳이니 분명 방법이 있을 것이라고 생각했습니다. 그렇게 계속 대시보드를 뒤졌습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABpElEQVQ4y31Ti47jIAzM/39ndd1eLl0ILwOGWRlCNu2lsYSMSBjPjM30eDxwv99xu92wrivOotZ6eR5CgLUWzjlMRKEdeB+glAbFiBgjiKjllNJ++WqVUlqe9Lpinv9ieSoYRzCuFxAwZkbOuf18tQbTBmisxbIsEKalMJRS0Fo3hp9kHpeEFBcSom46eiHy5nluXgig977tjTFtL4zP5Mp5Y1pKBxxRmHslol3KkD3APoX1CS4kTL/Ue84sQEDKGdZYMNf/5L53WbK1Dj7Qq+TMjOe36r4kxuOfgg/dH2F81e0RL4ByaVme+JbxoQhjLKRpw8Ph437nBHh6py6DLmtddQMYPkr+83WH0npnQz5Ab4o+AsoIdYm1jcMxRnNQsQ/ze+dfPcy5sRryZWT24RUPK5ALI3FGLRWBaQfeX8q7h8N8mUl52+OCAAlI5ASXQzs32YNbsfoKeDYSAqg3v+SS5dAYppLhtr1j6oWumnLci/ySGT4FuOgRUwQlAmXq9qSAlBMqM3h786eARwuSDyDvkQIhbnsrY2Vd+yaLQwQ51xr0A99T7Au3UfxEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"function metrics\"\n        title=\"function metrics\"\n        src=\"/static/a1d4b59ad2eba69631cd34d13d9eeca2/37523/07_4_function-metrics.png\"\n        srcset=\"/static/a1d4b59ad2eba69631cd34d13d9eeca2/e9ff0/07_4_function-metrics.png 180w,\n/static/a1d4b59ad2eba69631cd34d13d9eeca2/f21e7/07_4_function-metrics.png 360w,\n/static/a1d4b59ad2eba69631cd34d13d9eeca2/37523/07_4_function-metrics.png 720w,\n/static/a1d4b59ad2eba69631cd34d13d9eeca2/302a4/07_4_function-metrics.png 1080w,\n/static/a1d4b59ad2eba69631cd34d13d9eeca2/07a9c/07_4_function-metrics.png 1440w,\n/static/a1d4b59ad2eba69631cd34d13d9eeca2/71dc1/07_4_function-metrics.png 2346w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>대시보드의 Function metrics 탭에서 Request와 Error에 대해서 간략하게 확인할 수 있다</span></div>\n<br/>\n<p>그러던 중, 배포 시 빌드 로그가 쌓이는 디테일 섹션으로 들어가 Function 탭을 보니 RealTime Log 라는 베타 기능이 있는 것을 발견했습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABzklEQVQ4y5VU7WrcMBD0+z9Fn6T0X6BQCv1VKA35aHNnn+yTbGn1rSlaR845hQsnGHYky6ud8cqd9x7OOWhDHBtSSqijlHITupQivA/Q5EHWc6Kc8xZvRQcU/D0nfP3tIDSQooeaFUr5f3Ot4HJeD32vhBNOi8X95PD5+xOOvcCf5wOGQWAcR4YQez5NE/N5ntmelpArzDVzzrx49+MRZ0kgk+Bc/FBeGzsPqzQfMgwl7MdtH2Pn4YOI+PKT8PCywCwLpJTbppLrx1nRPIsxbrxhk1yJ8x6CHJ4GwiwlXg4H9kmIEUcx43RaMPQKWhOICMYYWGs5Nn4h+U1kzEDOewkxVQ6kVHBtbBXWxpZKwcgTktP8oMl4M75c9bQWkVuFtamPQuHQTziNCqezwaINSwshfHhb2mENXa3CkGNpIa68yb6WLL8mGzXw7bEwZlsTpoTgLYCMGOq9Ju7LGMLan5ygxobyulb4nV99wqe7wjjKjK5WdP/cY5g0JmXQC4nZeIjzwnOl3Q5ysYzKJ0WQagayA6Llf0IXU8ZCEcZFhAT4ilg41rn1CeQio/L1WeHI+yNAoYD8allXLvtmMxdb9N6ByDCcs6vkdzfqsnX+Ae7N5WXUeJguAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"realtime log\"\n        title=\"realtime log\"\n        src=\"/static/701c207471402d40348f60c1261bce16/37523/07_5_realtime-log.png\"\n        srcset=\"/static/701c207471402d40348f60c1261bce16/e9ff0/07_5_realtime-log.png 180w,\n/static/701c207471402d40348f60c1261bce16/f21e7/07_5_realtime-log.png 360w,\n/static/701c207471402d40348f60c1261bce16/37523/07_5_realtime-log.png 720w,\n/static/701c207471402d40348f60c1261bce16/302a4/07_5_realtime-log.png 1080w,\n/static/701c207471402d40348f60c1261bce16/07a9c/07_5_realtime-log.png 1440w,\n/static/701c207471402d40348f60c1261bce16/71dc1/07_5_realtime-log.png 2346w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>CloundFlare Pages에서 제공하는 베타 기능 RealTime Log</span></div>\n<br/>\n<p>할렐루야. 로그를 찾았습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABs0lEQVQ4y41T25abMAzk/7+v3bNJAMfcgm+yDIbkbXpsSpp0020e5ljYYqTRpThKh4k91mVFnGes6xW32w3TNIOI4D2DmbMdwoTr9Zp90pnAHEDkEULIKH5UBm3ToJMSqqng1AivR7AzmOcZ8xyfkAI9Yr+PcYFzhOJDOPRdh6HrYY3JGf390yuCVwESaXFoGEYrSCGg2wFjM4KtAVuds0z2TvRdoB3Fz9rCk0PIF/FlFn+wfPO2ofiUHmQ11GXIzZk85cwCWYQUyNN2kgM7e7e39/2b7n7FZ+NzhuPQw1wUrNpIJuYvCN4j7PbjWwgbmDfJqYaj0jCKMQ6MMC2Y44o5Lm/JfJL8cXZoG4m+bUBa5wzZ0ZZNksH8m/Q9FIc2dVnjXFegsQObC1hf8izmebTqoW7uuYYP9d2Ra8jkcCoriLqGlie4/gzenf1ecPpK8OhDe1NkKrRHWVYoqxpS1OjFCbqTeRaz5PhCXvyH5J2wqgU6UcLKwybd2ezwzjA/DXaW7AmiFlDnI6w83nc5NSZnEpf7pvy3y2n1yDlUZQUjj7CdgDcjvBoy8gqm9QvTW6S/AGFRccyrTXgUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"real log\"\n        title=\"real log\"\n        src=\"/static/231f6a1ba2209e3c5311ec98e6413562/37523/07_6_real-log.png\"\n        srcset=\"/static/231f6a1ba2209e3c5311ec98e6413562/e9ff0/07_6_real-log.png 180w,\n/static/231f6a1ba2209e3c5311ec98e6413562/f21e7/07_6_real-log.png 360w,\n/static/231f6a1ba2209e3c5311ec98e6413562/37523/07_6_real-log.png 720w,\n/static/231f6a1ba2209e3c5311ec98e6413562/302a4/07_6_real-log.png 1080w,\n/static/231f6a1ba2209e3c5311ec98e6413562/07a9c/07_6_real-log.png 1440w,\n/static/231f6a1ba2209e3c5311ec98e6413562/f291a/07_6_real-log.png 2258w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>에러 1101의 진짜 원인</span></div>\n<br/>\n<p>드디어 1101 에러의 원인을 찾을 수 있었습니다.</p>\n<p>To use the new ReadableStrea() constructor, …. compatibility flag를 가능하게 만들라는 것이었습니다.</p>\n<p>로그에 걸려있는 <a href=\"https://developers.cloudflare.com/workers/configuration/compatibility-dates/#compatibility-flags\">링크</a>를 들어가보니 <code class=\"language-text\">wrangler.toml</code> 에 설정해주는 것이었습니다. 이전 기능들과 호환성을 위해 제공되는 기능이었습니다. 처음엔 toml 파일을 직접 만들어 추가해주었는데, 1101 에러는 여전히 발생했습니다.</p>\n<p>문서를 다시 읽어보니 <code class=\"language-text\">wrangler.toml</code>는 <code class=\"language-text\">npx wrangler deply</code> 라는 명령어로 배포를 해야 적용되는 것이었습니다. 배포 시 로그를 보면 <code class=\"language-text\">remix build</code>만 실행시키고 있었고 wrangler를 배포하는 듯한 작업은 보이지 않았습니다. 이 작업은 CloundFlare 내부적으로 어딘가에서 수행하는 것으로 생각했습니다. 그렇다면 이 부분을 관리하는 대시보드 기능이 분명 있을 것이라 생각하고 다시 한번 더 찾아보았습니다.</p>\n<blockquote>\n<p>Compatibility dates can only be set via your <code class=\"language-text\">wrangler.toml</code> file and by running <code class=\"language-text\">[npx wrangler deploy](https://developers.cloudflare.com/workers/wrangler/commands/#deploy)</code>.</p>\n</blockquote>\n<p>역시나 찾을 수 있었습니다. 설정의 환경변수 탭 바로 아래에 Functions 라는 것이 있었고 Compatibility Date 와 Flag를 관리하는 섹션이 있었습니다.\nCompatibility Date가 이 사이드 프로젝트를 진행했을 즈음의 날짜로 설정되어 있는 것을 확인할 수 있었습니다. 바로 최근 날짜로 수정하고 재배포하니 정상적으로 접근할 수 있는 것을 확인했습니다.</p>\n<p>이상 대시보드와 열심히 싸워 결국 이긴 기록이었습니다.</p>\n<p>감사합니다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%8A%A4%ED%83%80%EC%9D%BC%EB%A7%81-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC-%EB%AC%B4%EC%97%87%EC%9C%BC%EB%A1%9C-%EB%B0%94%EA%BF%94%EB%B3%BC%EA%B9%8C\">스타일링 라이브러리를 무엇으로 바꿔볼까</a></p>\n<ul>\n<li><a href=\"#remix-%EC%98%9B-%EB%B2%84%EC%A0%84%EC%97%90-tailwind%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%84%A4%EC%B9%98%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80\">Remix 옛 버전에 Tailwind를 어떻게 설치할 것인가</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#cloudflare-pages-%EB%B0%B0%ED%8F%AC-%EC%9B%A8%EC%95%8A%EB%8C%80\">CloudFlare Pages 배포 웨않대</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 06, 2023","title":"배민 메뉴판 되살리기","categories":"challenge","author":"유자","emoji":"🏥"},"fields":{"slug":"/07_reviving_baemin_helper/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://www.yuzaalist.com","comments":{"utterances":{"repo":"yuzaa00/yuzaalist.dev"}}}}},"pageContext":{"slug":"/08_react_rendering/","nextSlug":"/07_reviving_baemin_helper/","prevSlug":""}},
    "staticQueryHashes": ["1073350324","1956554647","712016698"]}