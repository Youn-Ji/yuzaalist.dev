{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/06_bounded_context/",
    "result": {"data":{"cur":{"id":"836a1cb3-ac25-590a-9709-39209de6cf19","html":"<h2 id=\"패키지-분리를-이렇게-저렇게\" style=\"position:relative;\"><a href=\"#%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%B6%84%EB%A6%AC%EB%A5%BC-%EC%9D%B4%EB%A0%87%EA%B2%8C-%EC%A0%80%EB%A0%87%EA%B2%8C\" aria-label=\"패키지 분리를 이렇게 저렇게 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>패키지 분리를 이렇게 저렇게</h2>\n<p>‘패키지 분리를 바운디드 컨텍스트 기준으로 한다’는 무슨 뜻일까요. 전 회사 테크 리드님이 ‘저희는 바운디드 컨텍스트 기준으로 패키지를 분리하고 있습니다’ 라고 말씀해주실 때마다 ‘오 그렇구나.. 근데 그게 뭐죠..?’ 싶은 순간이 있었습니다. 현생에 치여 제대로 알아보지 못한 내용을 이제 한번 알아보려고 합니다.</p>\n<h2 id=\"바운디드-컨텍스트여-내게로-오라\" style=\"position:relative;\"><a href=\"#%EB%B0%94%EC%9A%B4%EB%94%94%EB%93%9C-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%97%AC-%EB%82%B4%EA%B2%8C%EB%A1%9C-%EC%98%A4%EB%9D%BC\" aria-label=\"바운디드 컨텍스트여 내게로 오라 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>바운디드 컨텍스트여 내게로 오라</h2>\n<h3 id=\"ddd-였구나\" style=\"position:relative;\"><a href=\"#ddd-%EC%98%80%EA%B5%AC%EB%82%98\" aria-label=\"ddd 였구나 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DDD 였구나</h3>\n<p>DDD(Domain Driven Design)은 도메인 모델을 기반으로 소프트웨어를 설계하는 것입니다. 규모가 큰 시스템의 도메인일수록 하나의 모델로 만드는 것은 어려워집니다. 그래서 이 큰 도메인의 모델을 나누고 바운디드 컨텍스트로 감싸는 방식의 소프트웨어를 설계합니다.\n바운디드 컨텍스트는 모델이 적용되는 범위라고 생각하면 됩니다. 도메인의 특정 부분을 떼어낸 모델은 유비쿼터스 언어로도 사용될 수 있어야 하는데 이때 사용되는 용어들의 의미를 구분하고 한정하는 역할을 합니다.</p>\n<h3 id=\"도메인은-무엇인가요\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80%EC%9A%94\" aria-label=\"도메인은 무엇인가요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>도메인은 무엇인가요?</h3>\n<p>도메인은 소프트웨어가 해결하려는 문제 영역입니다. 특정 비즈니스나 산업, 조직의 핵심 지식과 활동, 그리고 그에 관련된 개념과 규칙을 포함합니다.\n예를 들어 은행 도메인은 계좌 개설, 이체, 대출 승인 등에 대한 규칙이 포함될 수 있습니다. 도메인에 대한 전문 지식을 갖고 있는 전문가가 따로 있고 그와 함께 규칙을 세울 수 있습니다.</p>\n<p>그럼 비즈니스 로직과의 차이는 무엇일까요? 비즈니스 로직은 도메인 로직을 사용해서 어플리케이션에서 수행되는 전체적인 비즈니스 프로세스를 나타냅니다. 애플리케이션의 작업 흐름, 유효성 검사, UI와의 상호작용 등이 포함됩니다. 때문에 개발에서 도메인 로직보다는 더 넓은 의미로 사용됩니다.</p>\n<h3 id=\"모델은-무엇인가요\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80%EC%9A%94\" aria-label=\"모델은 무엇인가요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델은 무엇인가요?</h3>\n<p>도메인 주도 설계에서 모델은 특정 도메인의 주요 개념과 관계를 추상화하여 표현하는 것입니다. 추상화된 것은 유비쿼터스 언어로 사용할 수 있어야 합니다. 그래서 개발자와 도메인 전문가 사이의 공통의 언어로 의사소통할 수 있는 수단이 됩니다.</p>\n<h3 id=\"모델링은-어떻게-할-수-있나요\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8%EB%A7%81%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%A0-%EC%88%98-%EC%9E%88%EB%82%98%EC%9A%94\" aria-label=\"모델링은 어떻게 할 수 있나요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델링은 어떻게 할 수 있나요?</h3>\n<p>도메인 모델을 구성하는 핵심 요소로 엔터티(Entity), 값 객체(Value Object), 집합체(Aggregate)가 있습니다.</p>\n<p>엔터티는 고유한 식별자를 가지고 시간에 따라 상태가 변경될 수 있습니다. 예를 들어 사용자, 주문, 상품 등은  고유한 ID를 가지고 있고 시간에 따라 상태가 변할 수 있기 때문에 엔터티로 모델링됩니다. 주로 핵심 역할을 하는 객체를 표현할 때 사용됩니다.</p>\n<p>값 객체는 식별자를 가지지 않고 그 자체로 값이 됩니다. 값 객체는 한번 생성된 이후 상태가 변하지 않기 때문에 불변성을 가집니다. 예를 들어 날짜, 주소, 색상 등 처럼 값 자체로 의미를 가지게 됩니다. 변경이 필요한 경우 객체를 새로 만들어서 사용합니다.</p>\n<p>집합체는 엔터티와 값 객체의 그룹입니다. 집합체는 하나의 루트 엔터티를 기반으로 하고, 외부에서는 루트 엔터티를 통해서만 집합체 내의 다른 객체에 접근할 수 있습니다. 예를 들어 주문 집합체는 주문 엔터티를 루트로 가지고 주문 항목, 주소 등의 값 객체를 포함할 수 있습니다. 도메인 모델의 일관성을 유지하고 불필요한 외부 접근을 막는데 유용합니다.</p>\n<p>각 요소별로 간단하게 구현해보았습니다.</p>\n<ol>\n<li>엔터티</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Product</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> price</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 고유한 식별자</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> price<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">updatePrice</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newPrice</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> newPrice<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>엔터티로 모델링된 <code class=\"language-text\">Product</code>는 <code class=\"language-text\">id</code>라는 식별자를 가지고 <code class=\"language-text\">price</code>라는 상태를 업데이트할 수 있는 메소드를 가지고 있습니다.</p>\n<ol start=\"2\">\n<li>값 객체</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Address</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">street<span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">,</span> zipCode</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>street <span class=\"token operator\">=</span> street<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> city<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>zipCode <span class=\"token operator\">=</span> zipCode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">otherAddress</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>street <span class=\"token operator\">===</span> otherAddress<span class=\"token punctuation\">.</span>street <span class=\"token operator\">&amp;&amp;</span>\n           <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>city <span class=\"token operator\">===</span> otherAddress<span class=\"token punctuation\">.</span>city <span class=\"token operator\">&amp;&amp;</span>\n           <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>zipCode <span class=\"token operator\">===</span> otherAddress<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>값 객체로 모델링된 <code class=\"language-text\">Address</code>는 식별자가 없고, 다른 주소와 같은지 비교하는 메소드를 가지고 있을 뿐, 어떤 상태도 업데이트 할 수 없습니다.</p>\n<ol start=\"3\">\n<li>집합체</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">PaymentInfo</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cardNumber<span class=\"token punctuation\">,</span> expirationDate<span class=\"token punctuation\">,</span> cvv</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cardNumber <span class=\"token operator\">=</span> cardNumber<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expirationDate <span class=\"token operator\">=</span> expirationDate<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cvv <span class=\"token operator\">=</span> cvv<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">otherPaymentInfo</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cardNumber <span class=\"token operator\">===</span> otherPaymentInfo<span class=\"token punctuation\">.</span>cardNumber <span class=\"token operator\">&amp;&amp;</span>\n           <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expirationDate <span class=\"token operator\">===</span> otherPaymentInfo<span class=\"token punctuation\">.</span>expirationDate <span class=\"token operator\">&amp;&amp;</span>\n           <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cvv <span class=\"token operator\">===</span> otherPaymentInfo<span class=\"token punctuation\">.</span>cvv<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderItem</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">product<span class=\"token punctuation\">,</span> quantity</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>product <span class=\"token operator\">=</span> product<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>quantity <span class=\"token operator\">=</span> quantity<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">updateQuantity</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">quantity</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>quantity <span class=\"token operator\">=</span> quantity<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getTotalPrice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>product<span class=\"token punctuation\">.</span>price <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>quantity<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Order</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">orderId<span class=\"token punctuation\">,</span> customer</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>orderId <span class=\"token operator\">=</span> orderId<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>customer <span class=\"token operator\">=</span> customer<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>orderItems <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shippingAddress <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>paymentInfo <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">setShippingAddress</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">address</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shippingAddress <span class=\"token operator\">=</span> address<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">setPaymentInfo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">paymentInfo</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>paymentInfo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PaymentInfo</span><span class=\"token punctuation\">(</span>paymentInfo<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">addOrderItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">product<span class=\"token punctuation\">,</span> quantity</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> orderItem <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OrderItem</span><span class=\"token punctuation\">(</span>product<span class=\"token punctuation\">,</span> quantity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>orderItems<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>orderItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getTotalOrderPrice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>orderItems<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">total<span class=\"token punctuation\">,</span> item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> total <span class=\"token operator\">+</span> item<span class=\"token punctuation\">.</span><span class=\"token function\">getTotalPrice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>집합체로 모델링된 <code class=\"language-text\">Order</code>는 <code class=\"language-text\">OrderItem</code>과 <code class=\"language-text\">PaymentInfo</code>를 포함합니다. <code class=\"language-text\">OrderItem</code>은 <code class=\"language-text\">product</code>를 고유한 값으로 가지고 <code class=\"language-text\">quantity</code>를 수정할 수 있는 엔터티이고, <code class=\"language-text\">PaymentInfo</code>는 값 객체입니다.</p>\n<p>가장 기본이 되는 위 3개의 구성 요소 외에 도메인 서비스, 어플리케이션 서비스, 레포지토리, 팩토리, 도메인 이벤트로 모델을 구현할 수 있습니다.</p>\n<p>도메인 서비스는 도메인 로직이 엔터티나 값 객체에 위치하는게 자연스럽지 않을 때 사용됩니다. 예를 들어 두 사용자 간의 비밀번호 일치 여부를 확인하는 로직은 <code class=\"language-text\">UserService</code>라는 도메인 서비스에 위치할 수 있습니다.</p>\n<p>어플리케이션 서비스는 앱의 작업 흐름과 비즈니스 로직을 조정하고 외부 시스템과의 인터페이스 역할을 합니다. 주로 UI나 외부 시스템에서 호출되고, 도메인 객체들과의 협력을 통해 비즈니스 로직을 실행합니다. Use Case를 구현하는데 사용될 수 있습니다.</p>\n<p>레포지토리는 데이터베이스나 다른 저장소와의 인터페이스 역할을 하며 도메인 모델과 저장소 간의 중개자 역할을 합니다.</p>\n<p>팩토리는 복잡한 객체 생성 로직을 캡슐화하여 객체의 생성과 관련된 로직을 분리하는데 사용됩니다. 객체 생성 과정이 복잡하고 여러 단계를 거쳐야할 때 팩토리를 사용하면 단계를 더 명확하게 관리할 수 있습니다.</p>\n<p>도메인 이벤트는 도메인 내에서 중요한 사건이나 변화를 표현하는 이벤트입니다. 예를 들어 주문이 완료되었을 때 발생하는 <code class=\"language-text\">orderCompletedEvent</code>와 같은 것을 사용하여 다른 시스템이나 모듈에 해당 사실을 알릴 수 있습니다.</p>\n<p>그럼 위에 언급된 집합체는 엔터티, 값 객체가 함께 있는 것이라고 했는데, 이것 말고도 다른 요소가 들어갈 수 있는 것일까요? 맞습니다. 도메인 서비스, 팩토리, 도메인 이벤트가 들어갈 수 있습니다.\n어플리케이션 서비스나 레포지토리는 <a href=\"https://dev.to/moyousry/ddd-layered-architecture-2f73\">소프트웨어 아키텍쳐 계층</a>을 나누었을 때, 각각 Application Layer, Infrastructure Layer로 분류할 수 있기 때문에 Domain Layer로 구분되는 집합체에 다른 요소들과 그루핑되지 않습니다.</p>\n<h3 id=\"컨텍스트-맵은-무엇인가요\" style=\"position:relative;\"><a href=\"#%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8-%EB%A7%B5%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80%EC%9A%94\" aria-label=\"컨텍스트 맵은 무엇인가요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컨텍스트 맵은 무엇인가요?</h3>\n<p>전 직장에서 소스코드를 패키지로 분리하다보니 패키지들 중에서도 저수준, 고수준이 대략적으로 보였습니다. 분리된 패키지에는 App 패키지, User 패키지, 디자인 시스템 패키지, 유틸 패키지 등 종류가 다양했는데요. Nx에서 제공하는 그래프 기능으로는 패키지별 의존성 방향만 확인할 수 있었습니다. 패키지의 역할이 다양했기 때문에 그들의 관계를 의존성으로만 표현하기엔 부족하다는 생각이 들었습니다. 역시나 바운디드 컨텍스트 간의 관계를 정의하는 컨텍스트 맵이 있었습니다. 정의할 수 있는 관계에는 어떤 것들이 있는지, 현업에서 분리했던 패키지들에는 어떤 관계를 부여할 수 있을지 알아보겠습니다.</p>\n<ol>\n<li>Shared kernel (공유 커널)</li>\n</ol>\n<p>두 바운디드 컨텍스트가 공유하는 핵심 도메인 모델 또는 코드를 나타냅니다. 이 관계에서는 두 팀이 함께 핵심 부분을 유지 관리합니다.</p>\n<ol start=\"2\">\n<li>Customer/Supplier (고객/공급자)</li>\n</ol>\n<p>한 바운디드 컨텍스트(고객)이 다른 바운디드 컨텍스트(공급자)에 의존하며, 공급자는 고객의 요구 사항을 충족시키기 위해 작업합니다.</p>\n<ol start=\"3\">\n<li>Conformist(순응자)</li>\n</ol>\n<p>한 바운디드 컨텍스트가 다른 바운디드 컨텍스트의 모델과 API를 수용하며 독립적인 모델링을 추구하지 않습니다. 이 관계는 리드하는 컨텍스트의 모델이 충분히 좋거나, 순응자 컨텍스트가 모델링에 크게 관여하지 않을 때 유용합니다.</p>\n<ol start=\"4\">\n<li>AntiCorruption Layer (ACL, 부패 방지 계층)</li>\n</ol>\n<p>한 바운디드 컨텍스트가 다른 바운디드 컨텍스트와의 직접적인 의존성을 피하기 위해 중간 계층을 둡니다. ACL은 외부 시스템의 모델이 내부 시스템에 부정적인 영향을 주지 않도록 보호합니다.</p>\n<ol start=\"5\">\n<li>Open Host Service (개방형 호스트 서비스)</li>\n</ol>\n<p>한 바운디드 컨텍스트가 다른 바운디드 컨텍스트에게 표준화된 API나 프로토콜을 제공합니다. 이 API는 안정적이고 자주 변경되지 않아야 합니다.</p>\n<ol start=\"6\">\n<li>Published Language (공개 언어)</li>\n</ol>\n<p>여러 바운디드 컨텍스트 간에 공유되는 표준화된 언어나 데이터 구조를 제공합니다.</p>\n<ol start=\"7\">\n<li>Separate Ways</li>\n</ol>\n<p>두 바운디드 컨텍스트가 서로 독립적으로 발전하며, 통합을 추구하지 않는 관계입니다.</p>\n<ol start=\"8\">\n<li>Big Ball of Mud</li>\n</ol>\n<p>명확한 경계나 구조 없이 여러 바운디드 컨텍스트가 혼재된 형태입니다. 피하는게 좋습니다.</p>\n<h4 id=\"적용해보자-1-app과-디자인시스템-패키지의-관계\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90-1-app%EA%B3%BC-%EB%94%94%EC%9E%90%EC%9D%B8%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%8C%A8%ED%82%A4%EC%A7%80%EC%9D%98-%EA%B4%80%EA%B3%84\" aria-label=\"적용해보자 1 app과 디자인시스템 패키지의 관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[적용해보자 1] App과 디자인시스템 패키지의 관계</h4>\n<p>Customer/Supplier라고 할 수 있을 것 같습니다. App이 Customer가 되고 디자인시스템은 Supplier입니다. 앱에서 요구하는 UI를 디자인 시스템에서 제공하고 있기 때문입니다. 물론 디자인시스템을 UI의 SSOT로 삼고 UI 디자인이 나와준다면 좋겠지만, 해당 프로젝트의 경우 antd 라는 UI 라이브러리를 메인으로 사용했고 디자인 시스템 패키지 내부에는 antd에서 제공하지 않는 커스텀 UI 또는 아이콘 등을 분류해놨습니다. Customer의 필요에 의해 디자인 시스템을 계속 수정해나갔기 때문에 Supplier가 적절하다고 생각했습니다.</p>\n<h4 id=\"적용해보자-2-app과-multi-use-패키지의-관계\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90-2-app%EA%B3%BC-multi-use-%ED%8C%A8%ED%82%A4%EC%A7%80%EC%9D%98-%EA%B4%80%EA%B3%84\" aria-label=\"적용해보자 2 app과 multi use 패키지의 관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[적용해보자 2] App과 multi-use 패키지의 관계</h4>\n<p>multi-use는 도메인의 다회성 기능과 관련된 패키지입니다. 도메인 로직 수정 사항으로 multi-use가 변경되면 App은 순응해야하므로 Conformist로 보았습니다. 또한 multi-use는 핵심 도메인으로 분류된 패키지로 다른 많은 패키지에서 multi-use를 사용하고 있습니다. 때문에 Shared Kernel로 볼 수 있습니다.</p>\n<h4 id=\"적용해보자-3-multi-use와-date-util-패키지의-관계\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90-3-multi-use%EC%99%80-date-util-%ED%8C%A8%ED%82%A4%EC%A7%80%EC%9D%98-%EA%B4%80%EA%B3%84\" aria-label=\"적용해보자 3 multi use와 date util 패키지의 관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[적용해보자 3] multi-use와 date-util 패키지의 관계</h4>\n<p>date-util은 앱 내에서 날짜를 다루는 여러 기능을 제공하는 패키지입니다. 핵심 도메인 로직은 아닙니다. 서로 다른 바운디드 컨텍스트나 서버 통신을 위해 공통된 (날짜)데이터 포맷을 제공하고 있습니다. 그래서 Published Language로 볼 수 있을 듯 합니다.</p>\n<h4 id=\"적용해보자-4-app과-다른-app-패키지의-관계\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90-4-app%EA%B3%BC-%EB%8B%A4%EB%A5%B8-app-%ED%8C%A8%ED%82%A4%EC%A7%80%EC%9D%98-%EA%B4%80%EA%B3%84\" aria-label=\"적용해보자 4 app과 다른 app 패키지의 관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[적용해보자 4] App과 다른 App 패키지의 관계</h4>\n<p>Seperate Ways로 보았습니다. 두 개의 App 패키지가 있고, 배포도 따로 되고 있기 때문에 독립적으로 발전해야한다고 생각합니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>바운디드 컨텍스트는 도메인 주도 설계에서 사용되는 용어입니다. 도메인 주도 설계는 모델이 기반이 되어 소프트웨어를 설계하는데, 이때 모델이 적용되는 경계를 바운디드 컨텍스트라 합니다. 다양한 의미를 가질 수 있는 모델(=단어)를 바운더리 안에 집어넣어서 의미를 축소시킵니다. 이로 인해 다른 의미로 해석될 수 있는 여지를 줄일 수 있고 모델의 복잡성을 관리하거나 모델 간의 충돌을 방지합니다.</p>\n<p>‘팀의 크기와 구조가 아키텍쳐를 모방한다’는 Conway의 법칙은 팀의 조직 구조가 시스템의 아키텍쳐와 밀접한 관련이 있다는 것을 의미합니다.</p>\n<p>컨텍스트 매핑까지 살펴보니 규모가 큰 시스템을 가진 곳에서 도메인을 모델로 잘게 분리하고 바운디드 컨텍스트에 맞게 조직을 구성할 수 있다는 것을 알게 되었습니다. 서로 다른 바운디드 컨텍스트를 가진 팀들이 협업해야할 때, 컨텍스트 매핑을 통해 상호 작용의 방향성을 정의하고 관리할 수 있습니다.</p>\n<p>전 직장에서 해본 패키지 분리는 한 팀 내에서 소스코드의 의존성을 관리하며 효과적으로 작업하기 위해 분리한 것이었습니다. 그래서 패키지간 상호 작용에 대해서 깊게 고민해본 적이 없었습니다. 이번 기회를 통해 자세하게 알아볼 수 있어 재미있었습니다. 실제로 패키지 분리를 진행하는 동안 이에 대해 알고 있었다면 더욱 재밌는 작업이 되었을 것 같은데 그러지 못해 살짝 아쉽지만 이렇게라도 한발짝씩 나아가면서 발전하리라 믿습니다.</p>\n<h2 id=\"참고-문서\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EB%AC%B8%EC%84%9C\" aria-label=\"참고 문서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고 문서</h2>\n<ul>\n<li>\n<p>마틴 파울러의 Bounded Context <a href=\"https://martinfowler.com/bliki/BoundedContext.html\">https://martinfowler.com/bliki/BoundedContext.html</a></p>\n</li>\n<li>\n<p>마이크로서비스 모델링 ③ : DDD의 전략적 설계 <a href=\"https://engineering-skcc.github.io/microservice%20modeling/ddd-Srategic-design/#%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8-%EB%A7%B5\">https://engineering-skcc.github.io/microservice%20modeling/ddd-Srategic-design/#%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8-%EB%A7%B5</a></p>\n</li>\n<li>\n<p>DDD Quickly ( 도메인 주도 설계란 무엇인가?) 정리 <a href=\"https://read-write-developer.tistory.com/139\">https://read-write-developer.tistory.com/139</a></p>\n</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%B6%84%EB%A6%AC%EB%A5%BC-%EC%9D%B4%EB%A0%87%EA%B2%8C-%EC%A0%80%EB%A0%87%EA%B2%8C\">패키지 분리를 이렇게 저렇게</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%B0%94%EC%9A%B4%EB%94%94%EB%93%9C-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%97%AC-%EB%82%B4%EA%B2%8C%EB%A1%9C-%EC%98%A4%EB%9D%BC\">바운디드 컨텍스트여 내게로 오라</a></p>\n<ul>\n<li>\n<p><a href=\"#ddd-%EC%98%80%EA%B5%AC%EB%82%98\">DDD 였구나</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80%EC%9A%94\">도메인은 무엇인가요?</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%AA%A8%EB%8D%B8%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80%EC%9A%94\">모델은 무엇인가요?</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%AA%A8%EB%8D%B8%EB%A7%81%EC%9D%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%A0-%EC%88%98-%EC%9E%88%EB%82%98%EC%9A%94\">모델링은 어떻게 할 수 있나요?</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8-%EB%A7%B5%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80%EC%9A%94\">컨텍스트 맵은 무엇인가요?</a></p>\n<ul>\n<li><a href=\"#%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90-1-app%EA%B3%BC-%EB%94%94%EC%9E%90%EC%9D%B8%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%8C%A8%ED%82%A4%EC%A7%80%EC%9D%98-%EA%B4%80%EA%B3%84\">[적용해보자 1] App과 디자인시스템 패키지의 관계</a></li>\n<li><a href=\"#%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90-2-app%EA%B3%BC-multi-use-%ED%8C%A8%ED%82%A4%EC%A7%80%EC%9D%98-%EA%B4%80%EA%B3%84\">[적용해보자 2] App과 multi-use 패키지의 관계</a></li>\n<li><a href=\"#%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90-3-multi-use%EC%99%80-date-util-%ED%8C%A8%ED%82%A4%EC%A7%80%EC%9D%98-%EA%B4%80%EA%B3%84\">[적용해보자 3] multi-use와 date-util 패키지의 관계</a></li>\n<li><a href=\"#%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90-4-app%EA%B3%BC-%EB%8B%A4%EB%A5%B8-app-%ED%8C%A8%ED%82%A4%EC%A7%80%EC%9D%98-%EA%B4%80%EA%B3%84\">[적용해보자 4] App과 다른 App 패키지의 관계</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B2%B0%EB%A1%A0\">결론</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0-%EB%AC%B8%EC%84%9C\">참고 문서</a></p>\n</li>\n</ul>\n</div>","excerpt":"패키지 분리를 이렇게 저렇게 ‘패키지 분리를 바운디드 컨텍스트 기준으로 한다’는 무슨 뜻일까요. 전 회사 테크 리드님이 ‘저희는 바운디드 컨텍스트 기준으로 패키지를 분리하고 있습니다’ 라고 말씀해주실 때마다 ‘오 그렇구나.. 근데 그게 뭐죠..?’ 싶은 순간이 있었습니다. 현생에 치여 제대로 알아보지 못한 내용을 이제 한번 알아보려고 합니다. 바운디드 컨텍스트여 내게로 오라 DDD 였구나 DDD(Domain Driven Design)은 도메인 모델을 기반으로 소프트웨어를 설계하는 것입니다. 규모가 큰 시스템의 도메인일수록 하나의 모델로 만드는 것은 어려워집니다. 그래서 이 큰 도메인의 모델을 나누고 바운디드 컨텍스트로 감싸는 방식의 소프트웨어를 설계합니다.\n바운디드 컨텍스트는 모델이 적용되는 범위라고 생각하면 됩니다. 도메인의 특정 부분을 떼어낸 모델은 유비쿼터스 언어로도 사용될 수 있어야 하는데 이때 사용되는 용어들의 의미를 구분하고 한정하는 역할을 합니다. 도메인은 무엇인가요?…","frontmatter":{"date":"September 19, 2023","title":"바운디드 컨텍스트는 무엇인가요","categories":"challenge","author":"유자","emoji":"🪧"},"fields":{"slug":"/06_bounded_context/"}},"next":{"id":"1f2008c8-0c6d-5520-bef2-585e2741c1f4","html":"<h2 id=\"개발자로서-첫-퇴사\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%A1%9C%EC%84%9C-%EC%B2%AB-%ED%87%B4%EC%82%AC\" aria-label=\"개발자로서 첫 퇴사 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개발자로서 첫 퇴사</h2>\n<p>스타트업 칼바람이 불고 있었다. 다니고 있던 회사도 이를 피하지 못했고, 전사 회의에서 불안한 재정 상황에 대해 설명했다. 몇개월 후, 20명이 넘던 프로덕팀 모두 회사를 나왔다.</p>\n<p>동료분들이 몇 회사와 커피챗을 마련해주었다. 이때, 저연차 프론트엔드 개발자에게 통상적으로 요구되는 지식 레벨보다 한참 모자란 상태라는 것을 알게 됐다. 잘 짜여진 코드베이스 위에서 그때 그때 요구 사항에 따라 적절히 변형하고, QA받고, 배포했던 나날들이 스쳐지나갔다. 큰 고민없이 결과물만 빠르게 만들던 날들에 발등을 찍혀버렸다.</p>\n<p>이후 회사에서 사용했던 스택들이 어떤 특성이 있고, 사용해본 API는 뭐가 있으며, 어떤 문제를 해결하고 구동 원리는 무엇인지에 대해 공부했다. 늦었다고 생각했지만, 공부해가면서 ‘오히려 좋아’를 외쳤다. 우물 안 개구리처럼 아무것도 모른채로 스스로 만족하며 연차가 쌓였을 것을 생각하면 아찔했기 때문이다.</p>\n<h2 id=\"두번째-회사-입사-처음-본-것-투성이\" style=\"position:relative;\"><a href=\"#%EB%91%90%EB%B2%88%EC%A7%B8-%ED%9A%8C%EC%82%AC-%EC%9E%85%EC%82%AC-%EC%B2%98%EC%9D%8C-%EB%B3%B8-%EA%B2%83-%ED%88%AC%EC%84%B1%EC%9D%B4\" aria-label=\"두번째 회사 입사 처음 본 것 투성이 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두번째 회사 입사, 처음 본 것 투성이</h2>\n<h3 id=\"도메인-로직이-분리된-소스코드를-처음-보다\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%A1%9C%EC%A7%81%EC%9D%B4-%EB%B6%84%EB%A6%AC%EB%90%9C-%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%B2%98%EC%9D%8C-%EB%B3%B4%EB%8B%A4\" aria-label=\"도메인 로직이 분리된 소스코드를 처음 보다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>도메인 로직이 분리된 소스코드를 처음 보다</h3>\n<p>개념 공부를 하며 면접 준비를 하니 결국 기회를 얻을 수 있었다. 프론트엔드에서 도메인 로직이 UI와 완전히 분리된 코드를 처음 봤다. 도메인 디렉토리 하위에는 모델, 레포지토리, 서비스 등으로 구분되어 있었다. 모두 생소한 개념이었다. 리액트를 사용한 UI 구현부는 도메인과 같은 레벨에서 프레젠테이션이라는 이름으로 분리되어 있었다. 이를 계기로 아키텍쳐에 관심을 갖고 공부하기 시작했다. 당시 운 좋게 회사에서 책 ‘클린 아키텍쳐’ 스터디를 진행했고, 여기 참여하며 낯선 코드에 대한 이해도를 조금씩 높여나갈 수 있었다.</p>\n<h3 id=\"번역-하나-추가되었을-뿐인데\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD-%ED%95%98%EB%82%98-%EC%B6%94%EA%B0%80%EB%90%98%EC%97%88%EC%9D%84-%EB%BF%90%EC%9D%B8%EB%8D%B0\" aria-label=\"번역 하나 추가되었을 뿐인데 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역 하나 추가되었을 뿐인데</h3>\n<p>글로벌 진출을 염두에 둔 프로덕트였기 때문에 번역이 필수였다. i18next를 이때 처음 사용해봤다. 영어와 한글의 어순이 다르다보니 설계 시 고려해야하는 부분이 있다는 것을 알았고, QA에서도 번역이 잘 되었는지 검수하는 과정이 추가되었다. 디자인 역시 영어로 변경했을 때 글자가 길어지는 경우가 있기 때문에 ellipsis 같은 처리가 항상 고려되어야 했다. 영어와 한글 2가지만 대응했지만 이후 다른 언어를 추가한다고 했을 때, 쉽지 않겠다는 생각을 했다. 한/영을 제외한 언어를 대응하는 프로덕트를 한국에서 만나기 쉽지 않을 것이기 때문에 필요성이 커지면 그때 좀 더 고민해봐야겠다.</p>\n<h3 id=\"의존성-그래프를-보는-재미\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EC%A1%B4%EC%84%B1-%EA%B7%B8%EB%9E%98%ED%94%84%EB%A5%BC-%EB%B3%B4%EB%8A%94-%EC%9E%AC%EB%AF%B8\" aria-label=\"의존성 그래프를 보는 재미 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>의존성 그래프를 보는 재미</h3>\n<p>프론트 테크리드님의 제안으로 nx를 사용해 소스코드를 바운디드 컨텍스트 단위로 분리하게 됐다. 이미 도메인이 적절하게 분리되어있었기 때문에 큰 어려움은 없을 것이라 판단했으나, 역시나 얽히고 설킨 곳이 존재했다. 분리하며 고생하시는 리드님과 동료분을 보며 패키지 분리란 쉽지 않은 것이구나라는 것을 느꼈다. 이후 피쳐 개발을 하며 A라는 패키지 분리를 직접 해보았다. app으로 볼 수 있는 패키지가 2개 있었는데, 이 2개의 app은 서로를 의존하면 안되고 다른 패키지가 app을 바라보고 있어서도 안됐다. 분리한다고 했는데, 자꾸 circular dependency 에러가 떴다. 이때 nx graph라는 명령어를 통해 패키지별 의존성을 눈으로 확인하며 작업했다.\ngraph에서 의존 방향을 나타내는 화살표를 클릭하면 어느 파일에서 의존하고 있는지까지 확인할 수 있다. 이를 사용해 불필요한 의존이 있는 코드를 찾아내 손쉽게 삭제할 수 있었다. 그러나 분명히 graph에 표시된 파일에서 의존성을 삭제해도 반영되지 않는 이슈가 있었다. 숨은 의존성이 있나 아무리 찾아봐도 별다른게 보이지 않았다. 불현듯 캐시의 존재가 떠올랐고 nx 캐시를 지워보니 잘 작동했다.</p>\n<h3 id=\"원팀-스피릿을-느낄-수-있는-유저-스토리-매핑-헤븐-미팅\" style=\"position:relative;\"><a href=\"#%EC%9B%90%ED%8C%80-%EC%8A%A4%ED%94%BC%EB%A6%BF%EC%9D%84-%EB%8A%90%EB%82%84-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%9C%A0%EC%A0%80-%EC%8A%A4%ED%86%A0%EB%A6%AC-%EB%A7%A4%ED%95%91-%ED%97%A4%EB%B8%90-%EB%AF%B8%ED%8C%85\" aria-label=\"원팀 스피릿을 느낄 수 있는 유저 스토리 매핑 헤븐 미팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>원팀 스피릿을 느낄 수 있는 유저 스토리 매핑, 헤븐 미팅</h3>\n<p>개발, 디자인, CX, 마케팅, 데이터의 모든 팀원이 모여 <a href=\"https://spoqa.github.io/design-toolkit/project/user-story-map\">유저 스토리 매핑</a>이라는 것을 했다. 이후 진행될 사이클의 큰 그림을 그리기 위한 자리다. 프로덕트의 방향성과 동작에 대해 다같이 높은 얼라인을 맞출 수 있는 활동이다. 이전 회사는 PM 조직에서 기획을 마무리하고 개발 조직에서 된다/안된다 의견을 주는 방식이 대다수였다. 그러나 여기선 모든 팀원의 의견이 프로덕트에 바로 반영될 수 있었다. 합류한지 얼마 안된 신입에게 도메인을 빠르게 이해할 수 있었던 소중한 경험이었다.</p>\n<p>사이클을 시작하기 전에는 헤븐 미팅이라는 것을 했다. 원래는 목적을 달성할 때까지 끝나지 않는 미팅이라는 의미로 헬 미팅이었는데, 어감이 좋지 않아 헤븐으로 바뀌었다고 한다. ㅋㅋ 여기선 이번 사이클에 개발될 피쳐가 대략 정해져 있고 디자인이 공유된다. 팀원 모두 의견을 내며 더 나은 UI/UX를 제안하거나, 구현 가능 여부에 대해 논의한다. 이 미팅에서 개발팀의 의견이 중요해진다. 합류한지 얼마 안된 시점에는 기존 팀원들에게서 반감을 살 수 있다는 생각에 의견 내기가 조심스러웠다. 코드도 익숙하지 않았기 때문에 그 자리에서 디자인을 보고 구현 된다, 안된다의 가늠을 해보기도 쉽지 않았다. ‘윤지님 의견은 어때요?‘와 같은 질문이 들어오면 많이 당황했다. 틀린 대답을 하면 어떡하지와 같은 불안감으로 질문 받기가 무서웠다. 하지만 시간이 지날수록 팀원들과 유대 관계가 형성되고 코드도 더 익숙해지면서 불안감을 많이 내려놓고 의견을 낼 수 있었다. 여전히 떨리긴 했지만, 모든 것을 다 알 순 없고 틀려도 괜찮다는 마인드 컨트롤을 배웠다. 정말 모르겠는건 코드를 좀 봐야할 것 같다고 솔직하게 말하고, 어느정도 예상이 되는 것들은 일단 의견을 내고 나중에라도 ‘엇 알고보니 이렇네요’라고 빠르게 수정할 수만 있으면 된다고 생각했다. 그러니 미팅 자리가 편해졌고 질문이 들어와도 덜 당황할 수 있었다.</p>\n<h2 id=\"새로운-피쳐-개발의-시작\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%94%BC%EC%B3%90-%EA%B0%9C%EB%B0%9C%EC%9D%98-%EC%8B%9C%EC%9E%91\" aria-label=\"새로운 피쳐 개발의 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 피쳐 개발의 시작</h2>\n<p>합류하게 된 팀은 B2B SaaS 비즈니스를 전개하고 있었다. 기업의 복잡한 세일즈 퍼널을 간단하게 관리할 수 있게하는 세일즈 자동화 툴을 개발했고, 궁극적으로 고객사의 미팅 전환율을 높여주고자 했다. 전환율을 높여주는 여러 기능 중 핵심은 고객사 도입문의 페이지에 임베딩하는 것이었다. 임베딩된 코드는 도입문의 form의 submit 버튼에 연동되어 고객사의 잠재 고객이 제출하기 버튼을 클릭하면 세일즈맨과 바로 미팅을 잡을 수 있게 해준다.\n합류한 시점에는 리드(=잠재고객) 라우터라는 피쳐를 구현하면 됐다. 리드 라우터는 form 내부 여러 input 값에 따라 규칙을 설정하고 그에 맞는 세일즈맨 또는 세일즈 그룹을 배정할 수 있는 기능이다. 아래 그림은 리드 라우터에서 규칙 설정 부분의 UI 예시이다. 네모 박스를 노드, 흰 선을 엣지라고 표현했고, 노드 안에 input 값 별 배정 규칙이 들어갔다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLElEQVQY03WRW27bQAxFtYe2adXEthSNNA/OcMYPOXKcOHARoCm6//WcwnIa9KcfByRB8oK4rHaPzzy9vrEZ92y3G6ZpQkRmNmtlt83vKCXHay9GYowfc/9SleKJGrg397RdQwienDOlKK+/f3J6+8XD+czxx5njYU3wFmct3jtCCO/4j7wyw0DUxLJZcFPf0A89IpGUhE0e6LoV9bdPLBY16hoeDyMv5ydOp4n9Ns2XalmTVEkpUXXWkory/a7my9fP9P1V0PtAEodGR/QD4vs5HqbCej/SOUdJht24Zzy+oCXjnKUyxuCDZ9UsqW9rrB3IKmgSssY5v3h3IedEkRbpbzFNjQxLvLO0bYPpDU27orosRvFkDZQsM5rCLJiizL7IX+RSX83/31P+AN8XtPBsyJb+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"node-based-graph-example\"\n        title=\"node-based-graph-example\"\n        src=\"/static/b705b82af6a255d1c83f4632a47d3ac6/37523/11_node-based-graph-example.png\"\n        srcset=\"/static/b705b82af6a255d1c83f4632a47d3ac6/e9ff0/11_node-based-graph-example.png 180w,\n/static/b705b82af6a255d1c83f4632a47d3ac6/f21e7/11_node-based-graph-example.png 360w,\n/static/b705b82af6a255d1c83f4632a47d3ac6/37523/11_node-based-graph-example.png 720w,\n/static/b705b82af6a255d1c83f4632a47d3ac6/302a4/11_node-based-graph-example.png 1080w,\n/static/b705b82af6a255d1c83f4632a47d3ac6/d7e70/11_node-based-graph-example.png 1286w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>리드 라우터 규칙 설정 UI 예시</span></div>\n<h3 id=\"어서와-설계-미팅은-처음이지\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%84%9C%EC%99%80-%EC%84%A4%EA%B3%84-%EB%AF%B8%ED%8C%85%EC%9D%80-%EC%B2%98%EC%9D%8C%EC%9D%B4%EC%A7%80\" aria-label=\"어서와 설계 미팅은 처음이지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어서와 설계 미팅은 처음이지?</h3>\n<p>프로덕트 내에서 리드 라우터의 중요도가 높고 스콥도 컸기 때문에 스프린트는 두개로 나뉘었다. 개발 시작 전, 설계 미팅이 있었다. 고객사가 도입문의 form의 input들을 입력하고 그에 맞게 배정 규칙을 설정하고, 설정된 규칙에 따라 올바른 세일즈맨 그룹이 배정되어야 했다. 이미 복잡도가 높은 기획에서 프론트와 서버에서 각기 다른 라우팅 구현체를 만들어 사용하면 얼라인이 어렵고, 문제가 생겼을 때 디버깅하기 힘들어질 것이란 의견이 나왔다. 그래서 라우팅 구현을 담당하는 라이브러리를 만들고 이를 프론트와 서버에서 동일하게 사용하기로 했다. 시니어 개발자의 경험에서 우러나온 멋들어진 제안에 감탄하지 않을 수 없었다. 라이브러리를 직접 만들진 않았지만, 시니어 두 분이 만들어가는 과정을 보는건 아주 흥미롭고 재밌었다.</p>\n<h3 id=\"노드와-배정-규칙과-함께-춤을\" style=\"position:relative;\"><a href=\"#%EB%85%B8%EB%93%9C%EC%99%80-%EB%B0%B0%EC%A0%95-%EA%B7%9C%EC%B9%99%EA%B3%BC-%ED%95%A8%EA%BB%98-%EC%B6%A4%EC%9D%84\" aria-label=\"노드와 배정 규칙과 함께 춤을 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>노드와 배정 규칙과 함께 춤을</h3>\n<p>첫번째 스프린트에서 맡은 기능은 배정 규칙이 표시되는 노드와 그 노드를 수정하는 모달이었다. 고객사 도입문의 페이지 form의 input 타입에 따라 설정할 수 있는 규칙이 달라져야했다. 간단한 예로 checkbox일 땐, true, false 오직 두 개만 규칙으로 설정할 수 있다던가, number일 땐, ~보다 큰 경우, ~보다 작은 경우, ~와 ~ 사이인 경우 등 수와 관련된 규칙으로 설정할 수 있어야 했다.</p>\n<p>프로덕트에서 antd라는 UI 라이브러리를 사용하고 있었다. react-hook-form으로 폼을 다뤄본 적이 있었는데 비슷한 기능을 antd Form에서도 제공하고 있었다. 다수의 규칙을 수정할 수 있는 인풋 리스트를 관리하기 위해 Form.List라는 컴포넌트를 사용했다. 기존 코드에는 폼을 관리하는 매니저를 직접 구현해 사용하는 방법도 있었는데, 이는 구현체를 직접 다 만들어야 하고 기존에 작성되고 있던 컨벤션을 익혀야 한다는 부담감에 라이브러리 api를 사용하게 됐다. 팀원 분들도 antd를 오래 썼지만, Form.List 라는 것이 있는지 처음 봤다며 좋은 시도라고 말씀해주셨다. 기회가 된다면 폼 매니저를 직접 구현해서 사용하는 것과 라이브러리를 사용하는 것의 장단점을 비교하는 글을 작성해보려고 한다.</p>\n<p>타입에 따른 컴포넌트 분기 처리가 필요했다. 인풋별 타입을 만들고 그에 해당하는 규칙을 설정할 수 있는 컴포넌트를 각각 만들었다. 타입 가드를 활용해 컴포넌트 분기 처리를 했는데, 나중에 발생한 버그로 문제가 있다는 것을 알게 됐다. 타입 가드는 체가름과 같기 때문에 어떤 타입부터 필터링 할 것인지에 따라 결과가 다르게 나온다는 것을 고려하지 못했다.\n이때 타입 가드를 순서 고려 없이 사용하려면 원시 타입 설계가 중요하고, 애초에 타입 가드만으로 타입을 분리하기 보다는 원시 데이터에서 타입을 지정해서 내려주는 것이 프론트 작업이 편하다는것을 깨달았다.</p>\n<h3 id=\"삐그덕대는-몸뚱어리를-끌며-춤을\" style=\"position:relative;\"><a href=\"#%EC%82%90%EA%B7%B8%EB%8D%95%EB%8C%80%EB%8A%94-%EB%AA%B8%EB%9A%B1%EC%96%B4%EB%A6%AC%EB%A5%BC-%EB%81%8C%EB%A9%B0-%EC%B6%A4%EC%9D%84\" aria-label=\"삐그덕대는 몸뚱어리를 끌며 춤을 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>삐그덕대는 몸뚱어리를 끌며 춤을</h3>\n<p>두번째 스프린트에 참여했다. 위에서 만든 라우터 라이브러리가 빛을 발하는 순간이 왔다. 바로 라우팅 테스트 기능이었다. 유저가 라우터를 만들고 제대로 동작하는지 확인하기 위해 테스트 기능이 필요했다. 테스트할 때마다 서버 통신을 하지 않아도 공통 라이브러리를 사용하면 서버와 결과값이 다를지도 모른다는 의심을 하지 않아도된다. (이렇게 편할수가) 테스트 기능을 맡아 개발하면서 라우터 라이브러리를 제대로 파볼 수 있었다.\n그러나 UI 그려주는 작업만 하다가, 라우터 코어 로직과 관련된 작업을 하려니 쉽지 않았다. 엎친데 덮친 격으로 팀원들의 휴가 기간이 겹쳤고, 라이브 배포를 혼자 해야하는 상황이 만들어졌다. 배포는 혼자 해볼 수 있겠다고 생각했지만, 라우팅 테스트 기능을 기한 내에 만들 수 있을지 명확하지 않았다. 이 상태로 가면 코드 리뷰 없이 기능을 배포해야했다. 일단 기본 동작만 돌아가게끔 코드를 작성하고 코어 로직을 작성한 팀원의 휴가 이틀 전, SOS를 구했다. 함께 야근하며 코드를 리팩토링하고 구현하지 못한 기능까지 마무리할 수 있었다. 최종적으로 라우터 라이브러리를 사용해 테스트 결과를 trace라는 배열에 담아 리턴해주는 기능과 그 값을 받아 테스트 결과를 그려주는 UI 라이브러리를 조작하는 기능을 분리할 수 있었다. 혼자서 책임과 역할을 분리하는 것은 어려웠겠지만 도와준 팀원 덕에 만족할만한 수준으로 마무리할 수 있었다.\n야속하게도 팀원들은 모두 떠났고 야근은 계속 됐고, 항상 택시를 타고 퇴근하는 일상을 경험하게 됐다. 라이브 배포 전 QA를 혼자 쳐내며 내 실력이 부족해서 이런 시련을 겪는 것인지, 상황이 이렇게 굴러가도록 만든 모든 것들이 주마등처럼 스쳐지나갔다. 남아있는 팀원들의 배려로 배포 날짜는 금요일에서 다음주 월요일로 밀렸다. 주말 근무를 달리고, 결국 라이브 배포를 할 수 있었다.</p>\n<h3 id=\"내가-싼-똥은-내가-치우자\" style=\"position:relative;\"><a href=\"#%EB%82%B4%EA%B0%80-%EC%8B%BC-%EB%98%A5%EC%9D%80-%EB%82%B4%EA%B0%80-%EC%B9%98%EC%9A%B0%EC%9E%90\" aria-label=\"내가 싼 똥은 내가 치우자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>내가 싼 똥은 내가 치우자</h3>\n<p>배포 후 아쉬웠던 코드를 리팩토링했다. 혼자 난리치며 짜깁기한 코드들의 수술이 필요한 상태였다. 라우터를 저장하는 로직이 presentation에 정의되어 있었다. 저장하기 전에 유효성 체크를 하고, api를 호출하는 역할은 도메인과 밀접한 기능이라고 판단되었다. 그래서 관련 코드 전부를 domain 하위로 이동시키고, presentation에서는 저장하기 성공/실패 여부만 알 수 있게 해 그에 따른 UI를 보여줄 수 있도록 수정했다. 또 저장하기 로직에서 발생하는 알 수 없는 에러가 하나의 alert으로 노출되고 있었다. 이 에러가 api 호출에서 발생하는지, 라우터 라이브러리에서 발생하는지 구분하여 디버깅에 좀 더 용이하도록 수정했다.</p>\n<h2 id=\"두번째-회사를-마무리하며\" style=\"position:relative;\"><a href=\"#%EB%91%90%EB%B2%88%EC%A7%B8-%ED%9A%8C%EC%82%AC%EB%A5%BC-%EB%A7%88%EB%AC%B4%EB%A6%AC%ED%95%98%EB%A9%B0\" aria-label=\"두번째 회사를 마무리하며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두번째 회사를 마무리하며</h2>\n<p>첫 회사는 도메인이 단순했고 복잡한 설계가 필요한 프로덕트가 아니었다. 이번 회사는 SaaS 이기도 했고 복잡한 도메인을 추상화하는 아키텍쳐 설계가 필요했다. 첫 회사에서 해볼 수 없는 경험을 통해 단기간에 많은 것을 배우고 성장할 수 있었다. 도메인 로직 분리의 필요성에 대해 고민하게 되면서, 앱 전체적인 관점이 아닌 React 컴포넌트에서도 변경이 쉬운 컴포넌트를 설계하려면 어떻게 해야할까 고민하게 되는 출발점이 되었다.</p>\n<p>QA 조직이 있는 곳과 없는 곳에서 개발자의 책임은 다르다는 것을 느꼈다. QA 조직 없이 팀원 모두 QA를 함께 해야하는 상황이고, 그 팀원들은 각자 메인 롤이 있다. 개발자가 많아질수록 티켓이 늘어나기 때문에 QA 요청도 그에 따라 늘어나게 된다. QA 피로도가 충분히 쌓일 수 있는 상황이고, 이로 인한 부실한 QA가 이루어지기도 한다. 때문에 개발자가 최대한 꼼꼼하게 챙겨야한다는 생각을 했고, QA를 해주는 팀원들의 공수를 낮추기 위해 환경을 미리 세팅하고, 어떤 부분이 새롭게 개발되었는지 세세하게 공유했다. 서로 배려할수록 원팀의 시너지가 났고, 팀원들의 아낌없는 격려와 칭찬으로 노력이 헛되지 않았음을 느낄 수 있었다.</p>\n<p>주니어로 합류한 회사였고, 기술적으로 배울 점이 많은 시니어 분들이 계셔서 듬직했다. 그러나 비즈니스에 큰 관심이 있지 않다면 몰입하기 쉽지 않다는 것을 느꼈다. 이미 동료들은 하나의 목표를 가지고 앞만 보고 달려나가고 있는데, 나만 다른 방향을 보는 느낌이 들었다. HR이나 개발 프로세스같이 체계가 잡혀있는 곳에서 일하다가 없는 곳에서 일하는 것 또한 쉽지 않았다. 누군가에겐 장점이 되겠지만 누군가에겐 제약이 될 수 있다. 일을 할수록 나의 장점을 드러내기 어려운 환경과 조직 문화라는 것을 느꼈다. 나의 장점은 기존 체계에 빠르게 적응하고 남들이 놓칠 수 있는 부분을 꼼꼼하게 챙기고 원활한 커뮤니케이션을 하는 것인데, 이런 것들을 제대로 하지 못하고 있었다. 내가 못하는 것에 매몰되어 자신감을 잃는것보다는 잘 하는것을 더 성장시키고자 3개월 7일을 끝으로 각자의 길을 가게 되었다. 분명 개발적으로나 비즈니스적으로나 배울 부분이 많았고 지금도 아쉬운 마음이 들지만, 좀 더 성장한 이후에 기여할 수 있는 방향이 명확해지면 그때 다시 힘을 합쳐보고 싶다.</p>\n<p>나와 맞는 회사를 찾아 다시 한번 딥 다이브 해야지!</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%A1%9C%EC%84%9C-%EC%B2%AB-%ED%87%B4%EC%82%AC\">개발자로서 첫 퇴사</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%91%90%EB%B2%88%EC%A7%B8-%ED%9A%8C%EC%82%AC-%EC%9E%85%EC%82%AC-%EC%B2%98%EC%9D%8C-%EB%B3%B8-%EA%B2%83-%ED%88%AC%EC%84%B1%EC%9D%B4\">두번째 회사 입사, 처음 본 것 투성이</a></p>\n<ul>\n<li><a href=\"#%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%A1%9C%EC%A7%81%EC%9D%B4-%EB%B6%84%EB%A6%AC%EB%90%9C-%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%B2%98%EC%9D%8C-%EB%B3%B4%EB%8B%A4\">도메인 로직이 분리된 소스코드를 처음 보다</a></li>\n<li><a href=\"#%EB%B2%88%EC%97%AD-%ED%95%98%EB%82%98-%EC%B6%94%EA%B0%80%EB%90%98%EC%97%88%EC%9D%84-%EB%BF%90%EC%9D%B8%EB%8D%B0\">번역 하나 추가되었을 뿐인데</a></li>\n<li><a href=\"#%EC%9D%98%EC%A1%B4%EC%84%B1-%EA%B7%B8%EB%9E%98%ED%94%84%EB%A5%BC-%EB%B3%B4%EB%8A%94-%EC%9E%AC%EB%AF%B8\">의존성 그래프를 보는 재미</a></li>\n<li><a href=\"#%EC%9B%90%ED%8C%80-%EC%8A%A4%ED%94%BC%EB%A6%BF%EC%9D%84-%EB%8A%90%EB%82%84-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%9C%A0%EC%A0%80-%EC%8A%A4%ED%86%A0%EB%A6%AC-%EB%A7%A4%ED%95%91-%ED%97%A4%EB%B8%90-%EB%AF%B8%ED%8C%85\">원팀 스피릿을 느낄 수 있는 유저 스토리 매핑, 헤븐 미팅</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%94%BC%EC%B3%90-%EA%B0%9C%EB%B0%9C%EC%9D%98-%EC%8B%9C%EC%9E%91\">새로운 피쳐 개발의 시작</a></p>\n<ul>\n<li><a href=\"#%EC%96%B4%EC%84%9C%EC%99%80-%EC%84%A4%EA%B3%84-%EB%AF%B8%ED%8C%85%EC%9D%80-%EC%B2%98%EC%9D%8C%EC%9D%B4%EC%A7%80\">어서와 설계 미팅은 처음이지?</a></li>\n<li><a href=\"#%EB%85%B8%EB%93%9C%EC%99%80-%EB%B0%B0%EC%A0%95-%EA%B7%9C%EC%B9%99%EA%B3%BC-%ED%95%A8%EA%BB%98-%EC%B6%A4%EC%9D%84\">노드와 배정 규칙과 함께 춤을</a></li>\n<li><a href=\"#%EC%82%90%EA%B7%B8%EB%8D%95%EB%8C%80%EB%8A%94-%EB%AA%B8%EB%9A%B1%EC%96%B4%EB%A6%AC%EB%A5%BC-%EB%81%8C%EB%A9%B0-%EC%B6%A4%EC%9D%84\">삐그덕대는 몸뚱어리를 끌며 춤을</a></li>\n<li><a href=\"#%EB%82%B4%EA%B0%80-%EC%8B%BC-%EB%98%A5%EC%9D%80-%EB%82%B4%EA%B0%80-%EC%B9%98%EC%9A%B0%EC%9E%90\">내가 싼 똥은 내가 치우자</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%91%90%EB%B2%88%EC%A7%B8-%ED%9A%8C%EC%82%AC%EB%A5%BC-%EB%A7%88%EB%AC%B4%EB%A6%AC%ED%95%98%EB%A9%B0\">두번째 회사를 마무리하며</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"September 05, 2023","title":"2023 이른 회고","categories":"diary","author":"유자","emoji":"🔬"},"fields":{"slug":"/05_2023_early_retrospect/"}},"prev":{"id":"73ba89f2-cc5e-500b-a90a-0aed6cfeee03","html":"<h1 id=\"나의-작고-소중한-사이드-프로젝트\" style=\"position:relative;\"><a href=\"#%EB%82%98%EC%9D%98-%EC%9E%91%EA%B3%A0-%EC%86%8C%EC%A4%91%ED%95%9C-%EC%82%AC%EC%9D%B4%EB%93%9C-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8\" aria-label=\"나의 작고 소중한 사이드 프로젝트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>나의 작고 소중한 사이드 프로젝트</h1>\n<p>회사 출근했을 당시 점심을 배달로 시켜먹곤 했습니다. 여러명이 같이 주문을 하기 위해 배달의 민족 가게 링크를 슬랙으로 공유했습니다. 회사이다 보니 다들 PC로 먼저 확인했고 짧은 탄식과 함께 핸드폰을 주섬주섬 꺼내 앱으로 타고 타고 들어가 메뉴를 확인했습니다. (지금은 ‘함께 주문하기’ 기능이 나와서 탄식은 잘 안들리는 것 같습니다.)\n어느 날 동료 앱 개발자 분이 배민 웹을 만들고 싶은데 도와줄 사람을 찾고 있었습니다. 재빨리 손을 들었습니다.\n이후 빠르게 만들어 동료분들과 소소하게 사용했습니다. 괜히 배민께 피해갈라 앱으로 가는 딥링크도 연결해놨습니다.\n당시 사내 라이브러리인 디자인 시스템을 사용했는데, 퇴사 이후 배포하려고 보니, 토큰이 만료돼서 베포가 불가했습니다. 그렇게 해당 라이브러리를 걷어내지 않으면 배포할 수 없는 상황이 생겼고, 영원히 제 기억 속에서 잊혀…</p>\n<p>져 가지 않고 다시 살려내보았습니다. 아래 내용은 그 삽질을 담은 내용입니다.</p>\n<p>이 프로젝트는 Remix를 사용했고 배포는 Cloudflare Pages를 사용했습니다. Remix CLI로 프로젝트를 세팅할 때, CloudFlare Pages 옵션이 있어서 선택했는데, Next.js에게 Vercel이 있다면 Remix에겐  Cloudflare인듯 합니다.</p>\n<h2 id=\"스타일링-라이브러리를-무엇으로-바꿔볼까\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%83%80%EC%9D%BC%EB%A7%81-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC-%EB%AC%B4%EC%97%87%EC%9C%BC%EB%A1%9C-%EB%B0%94%EA%BF%94%EB%B3%BC%EA%B9%8C\" aria-label=\"스타일링 라이브러리를 무엇으로 바꿔볼까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스타일링 라이브러리를 무엇으로 바꿔볼까</h2>\n<p>위에서 언급했듯이, 옛 직장의 사내 라이브러리를 들어내야 했습니다. (이것을 통해 의존성의 중요성을 다시 한번 깨달았습니다.)\n일단 배포를 정상적으로 동작시키는 것이 우선이었고, 그를 위한 작업이라 시간을 많이 들이고 싶진 않았습니다. Radix와 같은 headless UI 라이브러리를 사용하고 그 위에 제가 원하는대로 스타일링을 덮을까 했지만 디자인하는데 시간이 오히려 걸릴 것 같았습니다. 배보다 배꼽이 큰 느낌.\n그러던 중 shadcn/ui 라는 라이브러리를 알게 됐습니다. Radix 와 Tailwind의 조합인데, 저는 Tailwind에 큰 거부감도 없고 오히려 쓰기 편했기 때문에 바로 적용하기로 결정할 수 있었습니다.\n그리고 Tailwind를 사용해 디자인 시스템 라이브러리를 어떻게 구현할 수 있는지 궁금했습니다.\n아 그리고 전 회사의 디자인 시스템도 Radix UI 기반이었기 때문에 이해하기 쉬울 것이라고 판단했습니다.</p>\n<p>아주 신기했던 것은 shadcn 이라는 배포된 npm 라이브러리가 있는게 아니었습니다. 유저 입장에서 설치해야하는 디펜던시는 radix와 tailwind 뿐이었습니다.\n필요한 컴포넌트를 사용하고 싶을 때 shadcn 공홈에 있는 cli를 사용하면 radix 패키지가 설치되고 그에 맞는 컴포넌트 코드가 추가됩니다. 물론 shadcn 사용 전에 어느 곳으로 코드가 추가될지 config 파일을 작성해주어야 합니다. 라이브러리 코드가 궁금하면 굳이 타고 들어가지 않아도 되고 마치 제 코드처럼 수정할 수 있어 공부하기 아주 좋았습니다.</p>\n<h3 id=\"remix-옛-버전에-tailwind를-어떻게-설치할-것인가\" style=\"position:relative;\"><a href=\"#remix-%EC%98%9B-%EB%B2%84%EC%A0%84%EC%97%90-tailwind%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%84%A4%EC%B9%98%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80\" aria-label=\"remix 옛 버전에 tailwind를 어떻게 설치할 것인가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Remix 옛 버전에 Tailwind를 어떻게 설치할 것인가</h3>\n<p>작업 당시 가장 최근에 나온 Remix는 v1.19이고 v2.0로 올릴 준비가 만만인 상태였습니다. 제 플젝은 v1.1을 사용하고 있었습니다. 일단 v1.1에서 공식문서대로 테일윈드 설치를 해보려고 했으나, 실패했습니다. 문서를 잘 살펴보니 현재 나와있는 테일윈드 설치법은 Remix 프로젝트를 새로 만드는 것 뿐이고, 기존 프로젝트에 붙이는 방법은 없었습니다.</p>\n<p>그간 변화도 있었습니다. <code class=\"language-text\">remix</code> 패키지는 더이상 사용하지 않고, <code class=\"language-text\">remix-run/react</code> 여기서 기존 api를 import해서 쓴다던가, 기존 package.json에 있는 postinstall을 실행하려고 하니 거기에 있는 cloundflare page setup 명령어가 deprecated 되어 있었습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABmUlEQVQoz02R2XKbQBBF9SnxQ2w5FgI0MCvrwFgCbCzJSypV+f/fOImQy+WHrtu3H0717V4NUuOKkjC/cPz4zfHPX6r9QGULXDeg6kAqLTvlELpAunopsXhHZkpioYiF5CEWrNokRwqDLB8p+2ecn9D1QBVelt62I0X3hGkGdHVY9DqfFm/9RF4E7qKcHz83rMZMoTOL7SbC9IprB5rHmTC9UT/O+OFMeH6nPZxo9ke68UwVrvN+elv6/umd+23Oze2GlU4TtnFCalqMn9F+RvoX8mogzksy1yHLQH7RokdVe3LXL15YT6pqEhNYb+UVqLYZu4cEYTpUd0K7PbY4oMsRUx5w1YgynkQ1CBdIM0ckHNHOEgm76DYrWEcZN7cRq91mh00V1raEOlBVgb7d48OMrUZMMSBNSyxrUtsTC/MJ+wb+Dry7j1nfJ0jrKdsB3Q64/hnrR2TZf0W+xLXNQDe9L1E336DXDfMrMHpISIQla2Z0+ED5M7o7Iy++e0X7E7Iel7vJco9pRsTnCdLP2umWX7Hi5v+X/wHirQ9DtQ1UtAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"error log\"\n        title=\"error log\"\n        src=\"/static/b523ca0bfbbdb6394e6b430a1792a5a3/37523/07_1_remix-error.png\"\n        srcset=\"/static/b523ca0bfbbdb6394e6b430a1792a5a3/e9ff0/07_1_remix-error.png 180w,\n/static/b523ca0bfbbdb6394e6b430a1792a5a3/f21e7/07_1_remix-error.png 360w,\n/static/b523ca0bfbbdb6394e6b430a1792a5a3/37523/07_1_remix-error.png 720w,\n/static/b523ca0bfbbdb6394e6b430a1792a5a3/302a4/07_1_remix-error.png 1080w,\n/static/b523ca0bfbbdb6394e6b430a1792a5a3/d7e70/07_1_remix-error.png 1286w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>작업 중 만난 에러 로그</span></div>\n<br/>\n<p>v1.1.1에 테일윈드를 적용해놓은 <a href=\"https://codesandbox.io/s/2x8pg?file=/.gitignore\">코드펜</a>을 찾긴 했는데, 테일윈드 css를 빌드하고 output 디렉토리까지 지정해줘야 하는것으로 보였습니다. 근데 이 코드는 개발 서버용이기 때문에 production 배포까지 고려한 tailwind 설정이 필요했습니다. 여기서 버전을 최신으로 올리는 것이 낫겠다고 판단했습니다. 지금 한계에 부딪혀서 굴복한다고 다른 한계를 만나지 않는 것은 아니기 때문에. 조만간 v2도 나온다고 하니 미리 써보기도 할 겸 겸사겸사 진행했습니다.</p>\n<p>그래서 최근 CloudFlare Page로 배포되는 Remix 프로젝트는 어떻게 구성되는지 create remix로 만들어 확인해봤습니다. 변경된 부분(package.json 먼저, 그 다음에 진입점 파일들)을 비교해가며 일일이 수정해준 후에 인스톨하니 잘 구동되었습니다. 이후 Tailwind 설치도 공식문서대로 따라하니 잘 적용되었습니다. (개운)</p>\n<p>버전을 올리며 인상 깊었던 것은, Remix에서 v2로의 스무스한 랜딩을 위해 future flag라는 기능을 제공한다는 것이었습니다. v2의 breaking changes를 remix.config 파일에서 on/off 해서 v1 에서도 쓸 수 있게 했습니다. 개발자 사용 편의를 많이 봐주고 있다는 것을 느낄 수 있었습니다.</p>\n<p>결국 Remix 버전 업데이트로 Tailwind를 잘 적용할 수 있었고 스타일링 라이브러리도 교체할 수 있었습니다.\n문제는 이 다음이었습니다.</p>\n<h2 id=\"cloudflare-pages-배포-웨않대\" style=\"position:relative;\"><a href=\"#cloudflare-pages-%EB%B0%B0%ED%8F%AC-%EC%9B%A8%EC%95%8A%EB%8C%80\" aria-label=\"cloudflare pages 배포 웨않대 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CloudFlare Pages 배포 웨않대</h2>\n<p>배포할 때 remix build 단계에서 에러가 발생했습니다. 에러 로그를 보니 <a href=\"https://github.com/remix-run/remix/issues/2400\">이런 이슈</a>였고 Node 버전이 낮아서라는걸 알게되었습니다.\nCloudFlare Pages 대시보드에서 노드 버전을 어떻게 명시해줄 수 있나 찾아보니 환경 변수로 넣어주면 되는 것이었습니다. (<a href=\"https://community.cloudflare.com/t/pages-node-js-version/295548\">참고글</a>) 바로 적용해주고 다시 배포를 돌려보니 배포는 성공했습니다.\n그러나 페이지 접근 시에 아래와 같은 화면이 보였습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA60lEQVQoz3VSa4+EIAz0//9HP53IoocP3ovoXNoLmzuXbTK2gTIzVLrrurDvO5xzjG3bYK0FBe2d58m5hdpTa4qOPkII9H2PYRi4prwsC7z3MMYwqK6iJJhz/kx4HAc3EKgOITDB3c09Wq6ZsBJU9VKOt8MkRE5jDPDO4SylKcKEWmtIKTGOI2e9rLDuV6Q6jTHyKNQ0Y3xM0HpFShGlFBYjvBzSTyEipRTmeYaQE+S0siPao1E8U+Ie8fjGl9SQSsNag5TS64ZE3qE9neas/izgU3T3A6RY51mfE625WBBSYTcVxmfk8v/5/AAC23CDeE+KygAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1101 error\"\n        title=\"1101 error\"\n        src=\"/static/5b511db9fc31f89895c5032a93275dab/37523/07_2_1101-error.png\"\n        srcset=\"/static/5b511db9fc31f89895c5032a93275dab/e9ff0/07_2_1101-error.png 180w,\n/static/5b511db9fc31f89895c5032a93275dab/f21e7/07_2_1101-error.png 360w,\n/static/5b511db9fc31f89895c5032a93275dab/37523/07_2_1101-error.png 720w,\n/static/5b511db9fc31f89895c5032a93275dab/302a4/07_2_1101-error.png 1080w,\n/static/5b511db9fc31f89895c5032a93275dab/07a9c/07_2_1101-error.png 1440w,\n/static/5b511db9fc31f89895c5032a93275dab/71dc1/07_2_1101-error.png 2346w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>1101 에러</span></div>\n<br/>\n<p>‘cloudflare pages 1101 error’와 같은 키워드로 구글링을 해봐도 마땅한 글이 없어 헤매던 중, log를 확인해보라는 이야기가 있었습니다. 머리를 탁치며 노선을 바꿨습니다.\n처음엔 네트워크 탭을 살펴봤습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABmElEQVQoz4VS7Y6kIBD0/d9vc87m3B2/UJTGUcFRBGpDe7PZX3udVAwgRXVXZeu6ImGeZxzHgRgjvPcIIXwjhoBBjuhHQt0KfJY1Q/Q9BkUQUkGNI0bSyLTWUEqBiBjP5xP7vsM5x98EHwLqpkdV1iDSkEMiV6i7AY3omEgqDaUfyBLBuiwwxuA8T6RKe9tmmTRVjMDfgfCnlyhIY1hWfuixGBazrgbGWli7IXs8ZjRtCyklpmnittNPbTdAjhrWWm67kQQhOkjSmO0Gu+04nONHj8Ph9J6RrXaHnh6wxrCy07lrpsuK53OH95fq6rOHaAQ0Ed7f35Hfbuj6Hq0QKMuKBaWRZUCEP09WlnCeAc5fxiTywwUmpKFD23VQRLjdcuR5jqIoWES65/6pzV6uvhBChA/xh8uRCTsh0bYCy7KgrgSqqv5OxtX2wfcz/LcuwqoZcS8rVvj29oE8v4FI8dxTUlK727ZdCn/D5XLEwjPeYcyKovhAeSf0veJ1SsgrJb8q/En4qhSX5LYQEvc7YZkNpklz++nsC07jASpKIWYTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"network tab\"\n        title=\"network tab\"\n        src=\"/static/6aac91b28abe59d0d4320c3ec134c08a/37523/07_3_network-tab.png\"\n        srcset=\"/static/6aac91b28abe59d0d4320c3ec134c08a/e9ff0/07_3_network-tab.png 180w,\n/static/6aac91b28abe59d0d4320c3ec134c08a/f21e7/07_3_network-tab.png 360w,\n/static/6aac91b28abe59d0d4320c3ec134c08a/37523/07_3_network-tab.png 720w,\n/static/6aac91b28abe59d0d4320c3ec134c08a/302a4/07_3_network-tab.png 1080w,\n/static/6aac91b28abe59d0d4320c3ec134c08a/07a9c/07_3_network-tab.png 1440w,\n/static/6aac91b28abe59d0d4320c3ec134c08a/863d7/07_3_network-tab.png 3520w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>1101 에러의 네트워크 탭</span></div>\n<br/>\n<p>딱히 도움 되는 것은 없었습니다. 새롭게 보이는 키워드로 구글링을 해보았으나 비슷한 내용만 나왔습니다.\n그러던 중 CloudFlare Pages 대시보드를 살펴보면서 Functions Metrics 라는 로깅 시스템을 발견했고, 여기서 error를 count하고 있으니 관련 로그를 확인할 수 있는 방법도 있지 않을까 생각했습니다. 서버를 서빙하는 것도 이곳이니 분명 방법이 있을 것이라고 생각했습니다. 그렇게 계속 대시보드를 뒤졌습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABpElEQVQ4y31Ti47jIAzM/39ndd1eLl0ILwOGWRlCNu2lsYSMSBjPjM30eDxwv99xu92wrivOotZ6eR5CgLUWzjlMRKEdeB+glAbFiBgjiKjllNJ++WqVUlqe9Lpinv9ieSoYRzCuFxAwZkbOuf18tQbTBmisxbIsEKalMJRS0Fo3hp9kHpeEFBcSom46eiHy5nluXgig977tjTFtL4zP5Mp5Y1pKBxxRmHslol3KkD3APoX1CS4kTL/Ue84sQEDKGdZYMNf/5L53WbK1Dj7Qq+TMjOe36r4kxuOfgg/dH2F81e0RL4ByaVme+JbxoQhjLKRpw8Ph437nBHh6py6DLmtddQMYPkr+83WH0npnQz5Ab4o+AsoIdYm1jcMxRnNQsQ/ze+dfPcy5sRryZWT24RUPK5ALI3FGLRWBaQfeX8q7h8N8mUl52+OCAAlI5ASXQzs32YNbsfoKeDYSAqg3v+SS5dAYppLhtr1j6oWumnLci/ySGT4FuOgRUwQlAmXq9qSAlBMqM3h786eARwuSDyDvkQIhbnsrY2Vd+yaLQwQ51xr0A99T7Au3UfxEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"function metrics\"\n        title=\"function metrics\"\n        src=\"/static/a1d4b59ad2eba69631cd34d13d9eeca2/37523/07_4_function-metrics.png\"\n        srcset=\"/static/a1d4b59ad2eba69631cd34d13d9eeca2/e9ff0/07_4_function-metrics.png 180w,\n/static/a1d4b59ad2eba69631cd34d13d9eeca2/f21e7/07_4_function-metrics.png 360w,\n/static/a1d4b59ad2eba69631cd34d13d9eeca2/37523/07_4_function-metrics.png 720w,\n/static/a1d4b59ad2eba69631cd34d13d9eeca2/302a4/07_4_function-metrics.png 1080w,\n/static/a1d4b59ad2eba69631cd34d13d9eeca2/07a9c/07_4_function-metrics.png 1440w,\n/static/a1d4b59ad2eba69631cd34d13d9eeca2/71dc1/07_4_function-metrics.png 2346w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>대시보드의 Function metrics 탭에서 Request와 Error에 대해서 간략하게 확인할 수 있다</span></div>\n<br/>\n<p>그러던 중, 배포 시 빌드 로그가 쌓이는 디테일 섹션으로 들어가 Function 탭을 보니 RealTime Log 라는 베타 기능이 있는 것을 발견했습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABzklEQVQ4y5VU7WrcMBD0+z9Fn6T0X6BQCv1VKA35aHNnn+yTbGn1rSlaR845hQsnGHYky6ud8cqd9x7OOWhDHBtSSqijlHITupQivA/Q5EHWc6Kc8xZvRQcU/D0nfP3tIDSQooeaFUr5f3Ot4HJeD32vhBNOi8X95PD5+xOOvcCf5wOGQWAcR4YQez5NE/N5ntmelpArzDVzzrx49+MRZ0kgk+Bc/FBeGzsPqzQfMgwl7MdtH2Pn4YOI+PKT8PCywCwLpJTbppLrx1nRPIsxbrxhk1yJ8x6CHJ4GwiwlXg4H9kmIEUcx43RaMPQKWhOICMYYWGs5Nn4h+U1kzEDOewkxVQ6kVHBtbBXWxpZKwcgTktP8oMl4M75c9bQWkVuFtamPQuHQTziNCqezwaINSwshfHhb2mENXa3CkGNpIa68yb6WLL8mGzXw7bEwZlsTpoTgLYCMGOq9Ju7LGMLan5ygxobyulb4nV99wqe7wjjKjK5WdP/cY5g0JmXQC4nZeIjzwnOl3Q5ysYzKJ0WQagayA6Llf0IXU8ZCEcZFhAT4ilg41rn1CeQio/L1WeHI+yNAoYD8allXLvtmMxdb9N6ByDCcs6vkdzfqsnX+Ae7N5WXUeJguAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"realtime log\"\n        title=\"realtime log\"\n        src=\"/static/701c207471402d40348f60c1261bce16/37523/07_5_realtime-log.png\"\n        srcset=\"/static/701c207471402d40348f60c1261bce16/e9ff0/07_5_realtime-log.png 180w,\n/static/701c207471402d40348f60c1261bce16/f21e7/07_5_realtime-log.png 360w,\n/static/701c207471402d40348f60c1261bce16/37523/07_5_realtime-log.png 720w,\n/static/701c207471402d40348f60c1261bce16/302a4/07_5_realtime-log.png 1080w,\n/static/701c207471402d40348f60c1261bce16/07a9c/07_5_realtime-log.png 1440w,\n/static/701c207471402d40348f60c1261bce16/71dc1/07_5_realtime-log.png 2346w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>CloundFlare Pages에서 제공하는 베타 기능 RealTime Log</span></div>\n<br/>\n<p>할렐루야. 로그를 찾았습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABs0lEQVQ4y41T25abMAzk/7+v3bNJAMfcgm+yDIbkbXpsSpp0020e5ljYYqTRpThKh4k91mVFnGes6xW32w3TNIOI4D2DmbMdwoTr9Zp90pnAHEDkEULIKH5UBm3ToJMSqqng1AivR7AzmOcZ8xyfkAI9Yr+PcYFzhOJDOPRdh6HrYY3JGf390yuCVwESaXFoGEYrSCGg2wFjM4KtAVuds0z2TvRdoB3Fz9rCk0PIF/FlFn+wfPO2ofiUHmQ11GXIzZk85cwCWYQUyNN2kgM7e7e39/2b7n7FZ+NzhuPQw1wUrNpIJuYvCN4j7PbjWwgbmDfJqYaj0jCKMQ6MMC2Y44o5Lm/JfJL8cXZoG4m+bUBa5wzZ0ZZNksH8m/Q9FIc2dVnjXFegsQObC1hf8izmebTqoW7uuYYP9d2Ra8jkcCoriLqGlie4/gzenf1ecPpK8OhDe1NkKrRHWVYoqxpS1OjFCbqTeRaz5PhCXvyH5J2wqgU6UcLKwybd2ezwzjA/DXaW7AmiFlDnI6w83nc5NSZnEpf7pvy3y2n1yDlUZQUjj7CdgDcjvBoy8gqm9QvTW6S/AGFRccyrTXgUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"real log\"\n        title=\"real log\"\n        src=\"/static/231f6a1ba2209e3c5311ec98e6413562/37523/07_6_real-log.png\"\n        srcset=\"/static/231f6a1ba2209e3c5311ec98e6413562/e9ff0/07_6_real-log.png 180w,\n/static/231f6a1ba2209e3c5311ec98e6413562/f21e7/07_6_real-log.png 360w,\n/static/231f6a1ba2209e3c5311ec98e6413562/37523/07_6_real-log.png 720w,\n/static/231f6a1ba2209e3c5311ec98e6413562/302a4/07_6_real-log.png 1080w,\n/static/231f6a1ba2209e3c5311ec98e6413562/07a9c/07_6_real-log.png 1440w,\n/static/231f6a1ba2209e3c5311ec98e6413562/f291a/07_6_real-log.png 2258w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div style=\"display: flex; justify-content: center; font-size: 14px; color: gray\"><span>에러 1101의 진짜 원인</span></div>\n<br/>\n<p>드디어 1101 에러의 원인을 찾을 수 있었습니다.</p>\n<p>To use the new ReadableStrea() constructor, …. compatibility flag를 가능하게 만들라는 것이었습니다.</p>\n<p>로그에 걸려있는 <a href=\"https://developers.cloudflare.com/workers/configuration/compatibility-dates/#compatibility-flags\">링크</a>를 들어가보니 <code class=\"language-text\">wrangler.toml</code> 에 설정해주는 것이었습니다. 이전 기능들과 호환성을 위해 제공되는 기능이었습니다. 처음엔 toml 파일을 직접 만들어 추가해주었는데, 1101 에러는 여전히 발생했습니다.</p>\n<p>문서를 다시 읽어보니 <code class=\"language-text\">wrangler.toml</code>는 <code class=\"language-text\">npx wrangler deply</code> 라는 명령어로 배포를 해야 적용되는 것이었습니다. 배포 시 로그를 보면 <code class=\"language-text\">remix build</code>만 실행시키고 있었고 wrangler를 배포하는 듯한 작업은 보이지 않았습니다. 이 작업은 CloundFlare 내부적으로 어딘가에서 수행하는 것으로 생각했습니다. 그렇다면 이 부분을 관리하는 대시보드 기능이 분명 있을 것이라 생각하고 다시 한번 더 찾아보았습니다.</p>\n<blockquote>\n<p>Compatibility dates can only be set via your <code class=\"language-text\">wrangler.toml</code> file and by running <code class=\"language-text\">[npx wrangler deploy](https://developers.cloudflare.com/workers/wrangler/commands/#deploy)</code>.</p>\n</blockquote>\n<p>역시나 찾을 수 있었습니다. 설정의 환경변수 탭 바로 아래에 Functions 라는 것이 있었고 Compatibility Date 와 Flag를 관리하는 섹션이 있었습니다.\nCompatibility Date가 이 사이드 프로젝트를 진행했을 즈음의 날짜로 설정되어 있는 것을 확인할 수 있었습니다. 바로 최근 날짜로 수정하고 재배포하니 정상적으로 접근할 수 있는 것을 확인했습니다.</p>\n<p>이상 대시보드와 열심히 싸워 결국 이긴 기록이었습니다.</p>\n<p>감사합니다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%8A%A4%ED%83%80%EC%9D%BC%EB%A7%81-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC-%EB%AC%B4%EC%97%87%EC%9C%BC%EB%A1%9C-%EB%B0%94%EA%BF%94%EB%B3%BC%EA%B9%8C\">스타일링 라이브러리를 무엇으로 바꿔볼까</a></p>\n<ul>\n<li><a href=\"#remix-%EC%98%9B-%EB%B2%84%EC%A0%84%EC%97%90-tailwind%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%84%A4%EC%B9%98%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80\">Remix 옛 버전에 Tailwind를 어떻게 설치할 것인가</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#cloudflare-pages-%EB%B0%B0%ED%8F%AC-%EC%9B%A8%EC%95%8A%EB%8C%80\">CloudFlare Pages 배포 웨않대</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 06, 2023","title":"배민 메뉴판 되살리기","categories":"challenge","author":"유자","emoji":"🏥"},"fields":{"slug":"/07_reviving_baemin_helper/"}},"site":{"siteMetadata":{"siteUrl":"https://www.yuzaalist.dev","comments":{"utterances":{"repo":"Youn-Ji/yuzaalist.dev"}}}}},"pageContext":{"slug":"/06_bounded_context/","nextSlug":"/05_2023_early_retrospect/","prevSlug":"/07_reviving_baemin_helper/"}},
    "staticQueryHashes": ["1073350324","1956554647","712016698"]}