---
emoji: 🔬
title: 2023 회고
date: '2023-09-04 20:00:00'
author: 유자
tags: 회고
categories: diary
---

## 개발자로서 첫 퇴사 
스타트업 칼바람이 불고 있었다. 다니고 있던 회사도 이를 피하지 못했고, 전사 회의에서 불안한 재정 상황에 대해 설명했다. 몇개월 후, 20명이 넘던 프로덕팀 모두가 회사를 나왔다.

동료분들이 몇 회사와 커피챗을 마련해주었다. 이때, 저연차 프론트엔드 개발자에게 통상적으로 요구되는 지식 레벨보다 한참 모자란 상태라는 것을 알게 됐다. 잘 짜여진 코드베이스 위에서 그때 그때 요구 사항에 따라 적절히 변형하고, QA받고, 배포했던 나날들이 스쳐지나갔다. 큰 고민없이 결과물만 빠르게 만들던 날들에 발등을 찍혀버렸다. 

이후 회사에서 사용했던 스택들이 어떤 특성이 있고, 사용해본 API는 뭐가 있으며, 어떤 문제를 해결하고 구동 원리는 무엇인지에 대해 공부했다. 늦었다고 생각했지만, 공부해가면서 '오히려 좋아'를 외쳤다. 우물 안 개구리처럼 아무것도 모른채로 스스로 만족하며 연차가 쌓였을 것을 생각하면 아찔했기 때문이다. 

## 두번째 회사 입사
2주간의 온보딩 과정이 있었고, 회사 코드에 익숙해지는 시간이었다. 프론트엔드에서 도메인 로직이 UI와 완전히 분리된 코드를 처음 봤다. 도메인 하위에는 모델, 레포지토리, 서비스 등으로 구분되어 있었다. 모두 생소한 개념이었다. 리액트를 사용한 UI 구현부는 도메인과 같은 레벨에서 프레젠테이션이라는 이름으로 분리되어 있었다. 이를 계기로 아키텍쳐에 관심을 갖고 공부하기 시작했다. 회사 동료들과 클린 아키텍쳐 스터디를 하며 낯선 코드에 대한 이해도를 조금씩 높여나갈 수 있었다. 
글로벌 진출을 염두에 둔 프로덕트였기 때문에 번역이 필수였다. i18next를 이때 처음 사용해봤다. 영어와 한글의 어순이 다르다보니 설계 시 고려해야하는 부분이 있다는 것을 알았고, QA에서도 번역이 잘 되었는지 검수하는 과정이 추가되었다. 영어와 한글 2가지만 대응했지만 이후 다른 언어를 추가로 대응한다고 했을 때, 쉽지 않겠다는 생각을 했다. 
nx를 사용해 소스코드를 분리하는 작업이 있었다. 바운디드 컨텍스트를 기준으로 패키지 분리를 했다. 마이크로 서비스로 나아가기 전에 보통 이런 전철을 밟는다는 것을 알고 더욱 흥미로웠다. 각 패키지별 의존성 그래프를 보며 패키지의 고/저수준에 대한 이해도도 높일 수 있었다. 이전 회사에서도 모노레포를 사용해보았지만, 그저 한 레포에서 두 개의 app이 관리되는 정도로 이해한 것이 아쉬워지기도 했다.
그 외에 개발, 디자인, CX, 마케팅, 데이터의 모든 팀원이 모여 [유저 스토리 매핑](https://spoqa.github.io/design-toolkit/project/user-story-map)이라는 것을 했다. 이후 진행될 사이클의 큰 그림을 그리기 위한 단계였다. 프로덕트의 방향성과 동작을 다같이 꽤 높은 얼라인을 맞출 수 있는 유용한 활동이었다. 특히나 합류한지 얼마안된 신입에게 도메인을 보다 쉽게 이해할 수 있었던 소중한 경험이었다.   

## 정식 스프린트 참여
고객사 페이지에 있는 form 정보를 토대로 결과물을 보여주는 라우터를 만들게되었다. 프로덕트에서 중요도가 높고 스콥도 컸기 때문에 스프린트는 두개로 나뉘었다. 개발 시작 전, 설계 미팅이 있었다. 유저가 규칙 설정을 하고, 설정된 규칙에 따라 결과물을 보여줘야 했다. 이미 복잡도가 높은 기획에서 프론트와 서버에서 각기 다른 라우팅 규칙 구현체를 만들어 사용하면 얼라인이 어렵고, 추후 디버깅에서 문제점을 찾기 더 힘들어질 것이란 의견이 나왔다. 그래서 라우팅 규칙 구현을 담당하는 라이브러리를 만들고 이를 프론트와 서버에서 동일하게 사용하기로 했다. 여기서 설계 미팅의 중요성을 느낄 수 있었다. 시니어 개발자의 경험에서 우러나온 멋들어진 제안에 감탄하지 않을 수 없었다. 비록 라이브러리를 직접 만들진 않았지만, 시니어 두 분이 만들어가는 과정을 보는건 아주 흥미롭고 재밌었다. 라우터의 가장 핵심 기능이기 때문에 안 볼 수 없기도 했다. 
이번 스프린트에서 맡은 기능은 라우팅 규칙이 표시되는 노드와 그 노드를 수정하는 모달이었다. 고객사 페이지 form의 input 타입에 따라 설정할 수 있는 규칙이 달라져야했다. 간단한 예로 checkbox일 땐, true, false 오직 두 개만 규칙으로 설정할 수 있다던가, number일 땐, ~보다 큰 경우, ~보다 작은 경우, ~와 ~ 사이인 경우 등 수와 관련된 규칙으로 설정할 수 있어야 했다.
타입에 따른 컴포넌트 분기 처리가 관건인 작업이었다. 각 규칙별 타입을 만들고 이를 구분할 수 있는 타입 가드를 활용하는 방향으로 작업했다. 이때 타입 가드를 애매모호한 부분없이 사용하려면 타입 설계가 중요하다는 부분을 깨달았다. 타입 가드만으로 타입을 분리하기 보다는 원시 데이터에서 규칙의 타입을 지정해서 내려주는 것이 작업에 용이하다는 것을 배웠다.

## 두번째 스프린트와 라이브 배포
두번째 스프린트에 참여했다. 위에서 만든 라우터 라이브러리가 빛을 발하는 순간이 왔다. 바로 라우팅 테스트 기능이었다. 유저가 라우터를 만들고 제대로 동작하는지 확인하기 위해 테스트 기능이 필요했다. 테스트 할 때마다 서버 통신을 하지 않아도 공통 라이브러리를 사용하면 서버와 결과값이 다를지도 모른다는 의심을 하지 않아도된다. (이렇게 편할수가) 테스트 기능을 맡아 개발하면서 라우터 라이브러리를 제대로 파볼 수 있었다. 
노드와 노드 수정 모달처럼 규칙에 따라 UI를 그려주는 작업을 하다가, 라우터의 코어 로직과 관련된 작업을 하려니 쉽지 않았다. 일단 어떻게든 돌아가는 코드를 짜고, 리뷰를 통해 개선해 나갔다. 최종적으로 라우터 라이브러리를 사용해 테스트 결과를 trace라는 배열에 담아 리턴해주는 모듈과 그 값을 받아 테스트 결과를 그려주는 UI 라이브러리를 조작하는 모듈을 분리할 수 있었다. 책임과 역할을 분리하는 것이 어려웠지만, 좋은 리드분과 함께하며 빠르게 결과물을 낼 수 있었다. 그리고 이 기능은 라이브 배포까지 별 탈 없이 이어질 수 있었다.

## 저장하기 핸들러 리팩토링
배포 후 아쉬웠던 코드를 리팩토링했다. 라우터를 저장하는 로직이 presentation에 정의되어 있었다. 저장하기 전에 유효성 체크를 하고, api를 호출하는 역할은 도메인과 밀접한 기능이라고 판단되었다. 그래서 관련 코드 전부를 domain 하위로 이동시키고, presentation에서는 저장하기 성공/실패 여부만 알 수 있게 해 그에 따른 UI를 보여줄 수 있도록 수정했다. 또 저장하기 로직에서 발생하는 알 수 없는 에러가 하나의 UI로 노출되고 있었다. 이를 api 호출에서 발생하는지, 라우터 라이브러리에서 발생하는지 구분하여 디버깅에 좀 더 용이하도록 수정했다. 

## 느낀점
첫 회사는 도메인이 단순했고 복잡한 설계가 필요한 프로덕트가 아니었다. 이번 회사는 SaaS 이기도 했고 복잡한 도메인을 단순화하는 아키텍쳐 설계가 필요했다. 첫 회사에서 해볼 수 없는 경험을 통해 단기간에 많은 것을 배우고 성장할 수 있었다. 도메인 로직 분리의 필요성에 대해 고민하게 되면서, 앱 전체적인 관점이 아닌 React 컴포넌트에서도 변경이 쉬운 컴포넌트를 설계하려면 어떻게 해야할까 고민하게 되는 출발점이 되었다. 

마지막으로 QA 조직이 있는 곳과 없는 곳에서 개발자의 책임은 다르다는 것을 느꼈다. QA 조직 없이 팀원 모두 QA를 함께 해야하는 상황이고, 그 팀원들은 각자 메인 롤이 있다. 개발자가 많아질수록 티켓이 늘어나기 때문에 QA 요청도 그에 따라 늘어나게 된다. QA 피로도가 충분히 쌓일 수 있는 상황이고, 이로 인한 부실한 QA가 이루어지기도 한다. 때문에 개발자가 최대한 꼼꼼하게 챙겨야한다는 생각을 했고, QA를 해주는 팀원들의 공수를 낮추기 위해 환경을 미리 세팅하고, 어떤 부분이 새롭게 개발되었는지 세세하게 공유했다. 서로 배려할수록 원팀의 시너지가 났고, 팀원들의 아낌없는 격려와 칭찬으로 노력이 헛되지 않았음을 느낄 수 있었다. 


```toc
```




